{"ast":null,"code":"import axios from 'axios';\nimport router from '@/router';\nimport { ElMessage } from 'element-plus';\nimport { getToken, removeToken, removeNickName, setToken } from '@/utils/auth';\naxios.defaults.baseURL = process.env.VUE_APP_BASE_API_URL;\naxios.defaults.timeout = 10000;\naxios.defaults.withCredentials = true;\naxios.defaults.headers['X-Requested-With'] = 'XMLHttpRequest';\naxios.defaults.headers.post['Content-Type'] = 'application/json';\naxios.interceptors.request.use(config => {\n  config.headers['Authorization'] = getToken();\n  return config;\n}, error => {\n  console.log(error);\n  Promise.reject(error);\n});\naxios.interceptors.response.use(res => {\n  if (typeof res.data !== 'object') {\n    ElMessage.error('服务端异常！');\n    return Promise.reject(res);\n  }\n  if (res.data.code != \"00000\") {\n    if (res.data.message) {\n      ElMessage.error(res.data.message);\n    }\n    // 登录已过期\n    if (res.data.code == 'A0230') {\n      // 移除 token \n      removeToken();\n      removeNickName();\n      router.push({\n        path: '/login'\n      });\n    }\n    return Promise.reject(res.data);\n  }\n  return res.data;\n}, error => {\n  ElMessage.error('网络异常！');\n  console.log(error);\n  Promise.reject(error);\n});\nexport default axios;","map":{"version":3,"names":["axios","router","ElMessage","getToken","removeToken","removeNickName","setToken","defaults","baseURL","process","env","VUE_APP_BASE_API_URL","timeout","withCredentials","headers","post","interceptors","request","use","config","error","console","log","Promise","reject","response","res","data","code","message","push","path"],"sources":["D:/desktop/小说精品屋/novel-front-web-master/novel-front-web-master/src/utils/request.js"],"sourcesContent":["import axios from 'axios'\nimport router from '@/router'\nimport { ElMessage } from 'element-plus'\nimport { getToken, removeToken, removeNickName, setToken } from '@/utils/auth'\n\n\n\naxios.defaults.baseURL = process.env.VUE_APP_BASE_API_URL\naxios.defaults.timeout = 10000\naxios.defaults.withCredentials = true\naxios.defaults.headers['X-Requested-With'] = 'XMLHttpRequest'\naxios.defaults.headers.post['Content-Type'] = 'application/json'\n\naxios.interceptors.request.use(config => {\n  config.headers['Authorization'] = getToken()\n  return config\n}, error => {\n  console.log(error)\n  Promise.reject(error)\n})\n\naxios.interceptors.response.use(res => {\n  if (typeof res.data !== 'object') {\n    ElMessage.error('服务端异常！')\n    return Promise.reject(res)\n  }\n  if (res.data.code != \"00000\") {\n    if (res.data.message) {\n      ElMessage.error(res.data.message)\n    }\n    // 登录已过期\n    if (res.data.code == 'A0230') {\n      // 移除 token \n      removeToken();\n      removeNickName();\n      router.push({ path: '/login' })\n    }\n\n    return Promise.reject(res.data)\n  }\n\n  return res.data\n}, error => {\n  ElMessage.error('网络异常！')\n  console.log(error)\n  Promise.reject(error)\n})\n\nexport default axios"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,OAAOC,MAAM,MAAM,UAAU;AAC7B,SAASC,SAAS,QAAQ,cAAc;AACxC,SAASC,QAAQ,EAAEC,WAAW,EAAEC,cAAc,EAAEC,QAAQ,QAAQ,cAAc;AAI9EN,KAAK,CAACO,QAAQ,CAACC,OAAO,GAAGC,OAAO,CAACC,GAAG,CAACC,oBAAoB;AACzDX,KAAK,CAACO,QAAQ,CAACK,OAAO,GAAG,KAAK;AAC9BZ,KAAK,CAACO,QAAQ,CAACM,eAAe,GAAG,IAAI;AACrCb,KAAK,CAACO,QAAQ,CAACO,OAAO,CAAC,kBAAkB,CAAC,GAAG,gBAAgB;AAC7Dd,KAAK,CAACO,QAAQ,CAACO,OAAO,CAACC,IAAI,CAAC,cAAc,CAAC,GAAG,kBAAkB;AAEhEf,KAAK,CAACgB,YAAY,CAACC,OAAO,CAACC,GAAG,CAACC,MAAM,IAAI;EACvCA,MAAM,CAACL,OAAO,CAAC,eAAe,CAAC,GAAGX,QAAQ,CAAC,CAAC;EAC5C,OAAOgB,MAAM;AACf,CAAC,EAAEC,KAAK,IAAI;EACVC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC;EAClBG,OAAO,CAACC,MAAM,CAACJ,KAAK,CAAC;AACvB,CAAC,CAAC;AAEFpB,KAAK,CAACgB,YAAY,CAACS,QAAQ,CAACP,GAAG,CAACQ,GAAG,IAAI;EACrC,IAAI,OAAOA,GAAG,CAACC,IAAI,KAAK,QAAQ,EAAE;IAChCzB,SAAS,CAACkB,KAAK,CAAC,QAAQ,CAAC;IACzB,OAAOG,OAAO,CAACC,MAAM,CAACE,GAAG,CAAC;EAC5B;EACA,IAAIA,GAAG,CAACC,IAAI,CAACC,IAAI,IAAI,OAAO,EAAE;IAC5B,IAAIF,GAAG,CAACC,IAAI,CAACE,OAAO,EAAE;MACpB3B,SAAS,CAACkB,KAAK,CAACM,GAAG,CAACC,IAAI,CAACE,OAAO,CAAC;IACnC;IACA;IACA,IAAIH,GAAG,CAACC,IAAI,CAACC,IAAI,IAAI,OAAO,EAAE;MAC5B;MACAxB,WAAW,CAAC,CAAC;MACbC,cAAc,CAAC,CAAC;MAChBJ,MAAM,CAAC6B,IAAI,CAAC;QAAEC,IAAI,EAAE;MAAS,CAAC,CAAC;IACjC;IAEA,OAAOR,OAAO,CAACC,MAAM,CAACE,GAAG,CAACC,IAAI,CAAC;EACjC;EAEA,OAAOD,GAAG,CAACC,IAAI;AACjB,CAAC,EAAEP,KAAK,IAAI;EACVlB,SAAS,CAACkB,KAAK,CAAC,OAAO,CAAC;EACxBC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC;EAClBG,OAAO,CAACC,MAAM,CAACJ,KAAK,CAAC;AACvB,CAAC,CAAC;AAEF,eAAepB,KAAK"},"metadata":{},"sourceType":"module"}