{"ast":null,"code":"import { reactive, toRefs, onMounted } from \"vue\";\nimport { useRouter, useRoute } from \"vue-router\";\nimport { listNewestRankBooks } from \"@/api/book\";\nexport default {\n  name: \"BookNewestRank\",\n  setup() {\n    const route = useRoute();\n    const router = useRouter();\n    const state = reactive({\n      books: [],\n      imgBaseUrl: process.env.VUE_APP_BASE_IMG_URL\n    });\n    onMounted(async () => {\n      const {\n        data\n      } = await listNewestRankBooks();\n      await data.forEach(book => {\n        if (state.books.length < 10) {\n          state.books[state.books.length] = book;\n        }\n      });\n    });\n    const bookDetail = bookId => {\n      router.push({\n        path: `/book/${bookId}`\n      });\n    };\n    return {\n      ...toRefs(state),\n      bookDetail\n    };\n  }\n};","map":{"version":3,"mappings":"AAiDA,SAASA,QAAQ,EAAEC,MAAM,EAAEC,SAAQ,QAAS,KAAK;AACjD,SAASC,SAAS,EAAEC,QAAO,QAAS,YAAY;AAChD,SAASC,mBAAkB,QAAS,YAAY;AAChD,eAAe;EACbC,IAAI,EAAE,gBAAgB;EACtBC,KAAKA,GAAG;IACN,MAAMC,KAAI,GAAIJ,QAAQ,CAAC,CAAC;IACxB,MAAMK,MAAK,GAAIN,SAAS,CAAC,CAAC;IAC1B,MAAMO,KAAI,GAAIV,QAAQ,CAAC;MACrBW,KAAK,EAAE,EAAE;MACTC,UAAU,EAAEC,OAAO,CAACC,GAAG,CAACC;IAC1B,CAAC,CAAC;IAEFb,SAAS,CAAC,YAAY;MACpB,MAAM;QAAEc;MAAK,IAAI,MAAMX,mBAAmB,CAAC,CAAC;MAE5C,MAAMW,IAAI,CAACC,OAAO,CAAEC,IAAI,IAAK;QAC3B,IAAIR,KAAK,CAACC,KAAK,CAACQ,MAAK,GAAI,EAAE,EAAE;UAC3BT,KAAK,CAACC,KAAK,CAACD,KAAK,CAACC,KAAK,CAACQ,MAAM,IAAID,IAAI;QACxC;MACF,CAAC,CAAC;IACJ,CAAC,CAAC;IACF,MAAME,UAAS,GAAKC,MAAM,IAAK;MAC7BZ,MAAM,CAACa,IAAI,CAAC;QAAEC,IAAI,EAAG,SAAQF,MAAO;MAAE,CAAC,CAAC;IAC1C,CAAC;IACD,OAAO;MACL,GAAGpB,MAAM,CAACS,KAAK,CAAC;MAChBU;IACF,CAAC;EACH;AACF,CAAC","names":["reactive","toRefs","onMounted","useRouter","useRoute","listNewestRankBooks","name","setup","route","router","state","books","imgBaseUrl","process","env","VUE_APP_BASE_IMG_URL","data","forEach","book","length","bookDetail","bookId","push","path"],"sourceRoot":"","sources":["D:\\desktop\\小说精品屋\\novel-front-web-master\\novel-front-web-master\\src\\components\\home\\BookNewestRank.vue"],"sourcesContent":["<template>\n  <div id=\"bookrank2_ShowBookRank\">\n    <div class=\"rightBox\">\n      <div class=\"title cf\">\n        <h3 class=\"on\">新书榜单</h3>\n      </div>\n      <div class=\"rightList\">\n        <ul id=\"newRankBooks\">\n          <li\n            v-for=\"(item, index) in books\"\n            :key=\"index\"\n            :class=\"['num' + (Number(`${index}`) + 1), { on: index == 0 }]\"\n          >\n            <div class=\"book_name\">\n              <i>{{ index + 1 }}</i\n              ><a\n                class=\"name\"\n                href=\"javascript:void(0)\"\n                @click=\"bookDetail(item.id)\"\n                >{{ item.bookName }}</a\n              >\n            </div>\n            <div class=\"book_intro\">\n              <div class=\"cover\">\n                <a href=\"javascript:void(0)\" @click=\"bookDetail(item.id)\"\n                  ><img\n                    :src=\"`${imgBaseUrl}` + `${item.picUrl}`\"\n                    :alt=\"item.bookName\"\n                    onerror=\"this.src='default.gif';this.onerror=null\"\n                /></a>\n              </div>\n              <a\n                class=\"txt\"\n                href=\"javascript:void(0)\"\n                @click=\"bookDetail(item.id)\"\n                v-html=\"item.bookDesc\"\n              ></a>\n            </div>\n          </li>\n        </ul>\n        <div class=\"more\">\n          <router-link :to=\"{ name: 'bookRank' }\">查看更多&gt;</router-link>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { reactive, toRefs, onMounted } from \"vue\";\nimport { useRouter, useRoute } from \"vue-router\";\nimport { listNewestRankBooks } from \"@/api/book\";\nexport default {\n  name: \"BookNewestRank\",\n  setup() {\n    const route = useRoute();\n    const router = useRouter();\n    const state = reactive({\n      books: [],\n      imgBaseUrl: process.env.VUE_APP_BASE_IMG_URL,\n    });\n\n    onMounted(async () => {\n      const { data } = await listNewestRankBooks();\n\n      await data.forEach((book) => {\n        if (state.books.length < 10) {\n          state.books[state.books.length] = book;\n        }\n      });\n    });\n    const bookDetail = (bookId) => {\n      router.push({ path: `/book/${bookId}` });\n    };\n    return {\n      ...toRefs(state),\n      bookDetail,\n    };\n  },\n};\n</script>"]},"metadata":{},"sourceType":"module"}