{"ast":null,"code":"import { inject, computed, ref, getCurrentInstance, nextTick, watch } from 'vue';\nimport { toTypeString } from '@vue/shared';\nimport '../../../constants/index2.mjs';\nimport '../../../tokens/index2.mjs';\nimport '../../../hooks/index2.mjs';\nimport '../../../utils/index2.mjs';\nimport { isValidComponentSize } from '../../../utils/vue/validator2.mjs';\nimport { formContextKey, formItemContextKey } from '../../../tokens/form2.mjs';\nimport { useFormItemInputId } from '../../../hooks/use-form-item/index2.mjs';\nimport { UPDATE_MODEL_EVENT } from '../../../constants/event2.mjs';\nimport { useSize } from '../../../hooks/use-common-props/index2.mjs';\nimport { debugWarn } from '../../../utils/error2.mjs';\nconst useCheckboxGroupProps = {\n  modelValue: {\n    type: Array,\n    default: () => []\n  },\n  disabled: Boolean,\n  min: {\n    type: Number,\n    default: void 0\n  },\n  max: {\n    type: Number,\n    default: void 0\n  },\n  size: {\n    type: String,\n    validator: isValidComponentSize\n  },\n  id: {\n    type: String,\n    default: void 0\n  },\n  label: {\n    type: String,\n    default: void 0\n  },\n  fill: {\n    type: String,\n    default: void 0\n  },\n  textColor: {\n    type: String,\n    default: void 0\n  },\n  tag: {\n    type: String,\n    default: \"div\"\n  }\n};\nconst useCheckboxProps = {\n  modelValue: {\n    type: [Number, String, Boolean],\n    default: () => void 0\n  },\n  label: {\n    type: [String, Boolean, Number, Object]\n  },\n  indeterminate: Boolean,\n  disabled: Boolean,\n  checked: Boolean,\n  name: {\n    type: String,\n    default: void 0\n  },\n  trueLabel: {\n    type: [String, Number],\n    default: void 0\n  },\n  falseLabel: {\n    type: [String, Number],\n    default: void 0\n  },\n  id: {\n    type: String,\n    default: void 0\n  },\n  controls: {\n    type: String,\n    default: void 0\n  },\n  border: Boolean,\n  size: {\n    type: String,\n    validator: isValidComponentSize\n  },\n  tabindex: [String, Number]\n};\nconst useCheckboxGroup = () => {\n  const elForm = inject(formContextKey, {});\n  const elFormItem = inject(formItemContextKey, {});\n  const checkboxGroup = inject(\"CheckboxGroup\", {});\n  const isGroup = computed(() => checkboxGroup && (checkboxGroup == null ? void 0 : checkboxGroup.name) === \"ElCheckboxGroup\");\n  const elFormItemSize = computed(() => {\n    return elFormItem.size;\n  });\n  return {\n    isGroup,\n    checkboxGroup,\n    elForm,\n    elFormItemSize,\n    elFormItem\n  };\n};\nconst useCheckboxGroupId = (props, {\n  elFormItem\n}) => {\n  const {\n    inputId: groupId,\n    isLabeledByFormItem\n  } = useFormItemInputId(props, {\n    formItemContext: elFormItem\n  });\n  return {\n    isLabeledByFormItem,\n    groupId\n  };\n};\nconst useModel = props => {\n  const selfModel = ref(false);\n  const {\n    emit\n  } = getCurrentInstance();\n  const {\n    isGroup,\n    checkboxGroup,\n    elFormItem\n  } = useCheckboxGroup();\n  const isLimitExceeded = ref(false);\n  const model = computed({\n    get() {\n      var _a, _b;\n      return isGroup.value ? (_a = checkboxGroup.modelValue) == null ? void 0 : _a.value : (_b = props.modelValue) != null ? _b : selfModel.value;\n    },\n    set(val) {\n      var _a;\n      if (isGroup.value && Array.isArray(val)) {\n        isLimitExceeded.value = checkboxGroup.max !== void 0 && val.length > checkboxGroup.max.value;\n        isLimitExceeded.value === false && ((_a = checkboxGroup == null ? void 0 : checkboxGroup.changeEvent) == null ? void 0 : _a.call(checkboxGroup, val));\n      } else {\n        emit(UPDATE_MODEL_EVENT, val);\n        selfModel.value = val;\n      }\n    }\n  });\n  return {\n    model,\n    isGroup,\n    isLimitExceeded,\n    elFormItem\n  };\n};\nconst useCheckboxStatus = (props, slots, {\n  model\n}) => {\n  const {\n    isGroup,\n    checkboxGroup\n  } = useCheckboxGroup();\n  const focus = ref(false);\n  const size = useSize(checkboxGroup == null ? void 0 : checkboxGroup.checkboxGroupSize, {\n    prop: true\n  });\n  const isChecked = computed(() => {\n    const value = model.value;\n    if (toTypeString(value) === \"[object Boolean]\") {\n      return value;\n    } else if (Array.isArray(value)) {\n      return value.includes(props.label);\n    } else if (value !== null && value !== void 0) {\n      return value === props.trueLabel;\n    } else {\n      return !!value;\n    }\n  });\n  const checkboxSize = useSize(computed(() => {\n    var _a;\n    return isGroup.value ? (_a = checkboxGroup == null ? void 0 : checkboxGroup.checkboxGroupSize) == null ? void 0 : _a.value : void 0;\n  }));\n  const hasOwnLabel = computed(() => {\n    return !!(slots.default || props.label);\n  });\n  return {\n    isChecked,\n    focus,\n    size,\n    checkboxSize,\n    hasOwnLabel\n  };\n};\nconst useDisabled = (props, {\n  model,\n  isChecked\n}) => {\n  const {\n    elForm,\n    isGroup,\n    checkboxGroup\n  } = useCheckboxGroup();\n  const isLimitDisabled = computed(() => {\n    var _a, _b;\n    const max = (_a = checkboxGroup.max) == null ? void 0 : _a.value;\n    const min = (_b = checkboxGroup.min) == null ? void 0 : _b.value;\n    return !!(max || min) && model.value.length >= max && !isChecked.value || model.value.length <= min && isChecked.value;\n  });\n  const isDisabled = computed(() => {\n    var _a, _b;\n    const disabled = props.disabled || (elForm == null ? void 0 : elForm.disabled);\n    return (_b = isGroup.value ? ((_a = checkboxGroup.disabled) == null ? void 0 : _a.value) || disabled || isLimitDisabled.value : disabled) != null ? _b : false;\n  });\n  return {\n    isDisabled,\n    isLimitDisabled\n  };\n};\nconst setStoreValue = (props, {\n  model\n}) => {\n  function addToStore() {\n    if (Array.isArray(model.value) && !model.value.includes(props.label)) {\n      model.value.push(props.label);\n    } else {\n      model.value = props.trueLabel || true;\n    }\n  }\n  props.checked && addToStore();\n};\nconst useEvent = (props, {\n  model,\n  isLimitExceeded,\n  hasOwnLabel,\n  isDisabled,\n  isLabeledByFormItem\n}) => {\n  const {\n    elFormItem\n  } = useCheckboxGroup();\n  const {\n    emit\n  } = getCurrentInstance();\n  function getLabeledValue(value) {\n    var _a, _b;\n    return value === props.trueLabel || value === true ? (_a = props.trueLabel) != null ? _a : true : (_b = props.falseLabel) != null ? _b : false;\n  }\n  function emitChangeEvent(checked, e) {\n    emit(\"change\", getLabeledValue(checked), e);\n  }\n  function handleChange(e) {\n    if (isLimitExceeded.value) return;\n    const target = e.target;\n    emit(\"change\", getLabeledValue(target.checked), e);\n  }\n  async function onClickRoot(e) {\n    if (isLimitExceeded.value) return;\n    if (!hasOwnLabel.value && !isDisabled.value && isLabeledByFormItem.value) {\n      model.value = getLabeledValue([false, props.falseLabel].includes(model.value));\n      await nextTick();\n      emitChangeEvent(model.value, e);\n    }\n  }\n  watch(() => props.modelValue, () => {\n    var _a;\n    (_a = elFormItem == null ? void 0 : elFormItem.validate) == null ? void 0 : _a.call(elFormItem, \"change\").catch(err => debugWarn(err));\n  });\n  return {\n    handleChange,\n    onClickRoot\n  };\n};\nconst useCheckbox = (props, slots) => {\n  const {\n    model,\n    isGroup,\n    isLimitExceeded,\n    elFormItem\n  } = useModel(props);\n  const {\n    focus,\n    size,\n    isChecked,\n    checkboxSize,\n    hasOwnLabel\n  } = useCheckboxStatus(props, slots, {\n    model\n  });\n  const {\n    isDisabled\n  } = useDisabled(props, {\n    model,\n    isChecked\n  });\n  const {\n    inputId,\n    isLabeledByFormItem\n  } = useFormItemInputId(props, {\n    formItemContext: elFormItem,\n    disableIdGeneration: hasOwnLabel,\n    disableIdManagement: isGroup\n  });\n  const {\n    handleChange,\n    onClickRoot\n  } = useEvent(props, {\n    model,\n    isLimitExceeded,\n    hasOwnLabel,\n    isDisabled,\n    isLabeledByFormItem\n  });\n  setStoreValue(props, {\n    model\n  });\n  return {\n    elFormItem,\n    inputId,\n    isLabeledByFormItem,\n    isChecked,\n    isDisabled,\n    isGroup,\n    checkboxSize,\n    hasOwnLabel,\n    model,\n    handleChange,\n    onClickRoot,\n    focus,\n    size\n  };\n};\nexport { useCheckbox, useCheckboxGroup, useCheckboxGroupId, useCheckboxGroupProps, useCheckboxProps };","map":{"version":3,"mappings":"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","names":["useCheckboxGroupProps","modelValue","type","Array","default","disabled","Boolean","min","Number","max","size","String","validator","isValidComponentSize","id","label","fill","textColor","tag","useCheckboxProps","Object","indeterminate","checked","name","trueLabel","falseLabel","controls","border","tabindex","useCheckboxGroup","elForm","inject","formContextKey","elFormItem","formItemContextKey","checkboxGroup","isGroup","computed","elFormItemSize","useCheckboxGroupId","props","inputId","groupId","isLabeledByFormItem","useFormItemInputId","formItemContext","useModel","selfModel","ref","emit","getCurrentInstance","isLimitExceeded","model","get","_a","_b","value","set","val","isArray","length","changeEvent","call","UPDATE_MODEL_EVENT","useCheckboxStatus","slots","focus","useSize","checkboxGroupSize","prop","isChecked","toTypeString","includes","checkboxSize","hasOwnLabel","useDisabled","isLimitDisabled","isDisabled","setStoreValue","addToStore","push","useEvent","getLabeledValue","emitChangeEvent","e","handleChange","target","onClickRoot","nextTick","watch","validate","catch","err","debugWarn","useCheckbox","disableIdGeneration","disableIdManagement"],"sources":["../../../../../../packages/components/checkbox/src/useCheckbox.ts"],"sourcesContent":["import { computed, getCurrentInstance, inject, nextTick, ref, watch } from 'vue'\nimport { toTypeString } from '@vue/shared'\nimport { UPDATE_MODEL_EVENT } from '@element-plus/constants'\nimport { formContextKey, formItemContextKey } from '@element-plus/tokens'\nimport { useFormItemInputId, useSize } from '@element-plus/hooks'\nimport { debugWarn, isValidComponentSize } from '@element-plus/utils'\nimport type { ComponentInternalInstance, ExtractPropTypes, PropType } from 'vue'\nimport type { ComponentSize } from '@element-plus/constants'\nimport type { FormContext, FormItemContext } from '@element-plus/tokens'\nimport type { ICheckboxGroupInstance } from './checkbox.type'\n\nexport const useCheckboxGroupProps = {\n  modelValue: {\n    type: Array as PropType<Array<string | number>>,\n    default: () => [],\n  },\n  disabled: Boolean,\n  min: {\n    type: Number,\n    default: undefined,\n  },\n  max: {\n    type: Number,\n    default: undefined,\n  },\n  size: {\n    type: String as PropType<ComponentSize>,\n    validator: isValidComponentSize,\n  },\n  id: {\n    type: String,\n    default: undefined,\n  },\n  label: {\n    type: String,\n    default: undefined,\n  },\n  fill: {\n    type: String,\n    default: undefined,\n  },\n  textColor: {\n    type: String,\n    default: undefined,\n  },\n  tag: {\n    type: String,\n    default: 'div',\n  },\n}\n\nexport type IUseCheckboxGroupProps = ExtractPropTypes<\n  typeof useCheckboxGroupProps\n>\n\nexport const useCheckboxProps = {\n  modelValue: {\n    type: [Number, String, Boolean],\n    default: () => undefined,\n  },\n  label: {\n    type: [String, Boolean, Number, Object],\n  },\n  indeterminate: Boolean,\n  disabled: Boolean,\n  checked: Boolean,\n  name: {\n    type: String,\n    default: undefined,\n  },\n  trueLabel: {\n    type: [String, Number],\n    default: undefined,\n  },\n  falseLabel: {\n    type: [String, Number],\n    default: undefined,\n  },\n  id: {\n    type: String,\n    default: undefined,\n  },\n  controls: {\n    type: String,\n    default: undefined,\n  },\n  border: Boolean,\n  size: {\n    type: String as PropType<ComponentSize>,\n    validator: isValidComponentSize,\n  },\n  tabindex: [String, Number],\n}\n\nexport type IUseCheckboxProps = ExtractPropTypes<typeof useCheckboxProps>\n\nexport const useCheckboxGroup = () => {\n  const elForm = inject(formContextKey, {} as FormContext)\n  const elFormItem = inject(formItemContextKey, {} as FormItemContext)\n  const checkboxGroup = inject<ICheckboxGroupInstance>('CheckboxGroup', {})\n  const isGroup = computed(\n    () => checkboxGroup && checkboxGroup?.name === 'ElCheckboxGroup'\n  )\n  const elFormItemSize = computed(() => {\n    return elFormItem.size\n  })\n  return {\n    isGroup,\n    checkboxGroup,\n    elForm,\n    elFormItemSize,\n    elFormItem,\n  }\n}\n\nexport const useCheckboxGroupId = (\n  props: IUseCheckboxGroupProps,\n  { elFormItem }: Partial<ReturnType<typeof useCheckboxGroup>>\n) => {\n  const { inputId: groupId, isLabeledByFormItem } = useFormItemInputId(props, {\n    formItemContext: elFormItem,\n  })\n\n  return {\n    isLabeledByFormItem,\n    groupId,\n  }\n}\n\nconst useModel = (props: IUseCheckboxProps) => {\n  const selfModel = ref<any>(false)\n  const { emit } = getCurrentInstance()!\n  const { isGroup, checkboxGroup, elFormItem } = useCheckboxGroup()\n  const isLimitExceeded = ref(false)\n  const model = computed({\n    get() {\n      return isGroup.value\n        ? checkboxGroup.modelValue?.value\n        : props.modelValue ?? selfModel.value\n    },\n\n    set(val: unknown) {\n      if (isGroup.value && Array.isArray(val)) {\n        isLimitExceeded.value =\n          checkboxGroup.max !== undefined &&\n          val.length > checkboxGroup.max.value\n        isLimitExceeded.value === false && checkboxGroup?.changeEvent?.(val)\n      } else {\n        emit(UPDATE_MODEL_EVENT, val)\n        selfModel.value = val\n      }\n    },\n  })\n\n  return {\n    model,\n    isGroup,\n    isLimitExceeded,\n    elFormItem,\n  }\n}\n\nconst useCheckboxStatus = (\n  props: IUseCheckboxProps,\n  slots: ComponentInternalInstance['slots'],\n  { model }: Partial<ReturnType<typeof useModel>>\n) => {\n  const { isGroup, checkboxGroup } = useCheckboxGroup()\n  const focus = ref(false)\n  const size = useSize(checkboxGroup?.checkboxGroupSize, { prop: true })\n  const isChecked = computed<boolean>(() => {\n    const value = model!.value\n    if (toTypeString(value) === '[object Boolean]') {\n      return value\n    } else if (Array.isArray(value)) {\n      return value.includes(props.label)\n    } else if (value !== null && value !== undefined) {\n      return value === props.trueLabel\n    } else {\n      return !!value\n    }\n  })\n\n  const checkboxSize = useSize(\n    computed(() =>\n      isGroup.value ? checkboxGroup?.checkboxGroupSize?.value : undefined\n    )\n  )\n\n  const hasOwnLabel = computed<boolean>(() => {\n    return !!(slots.default || props.label)\n  })\n\n  return {\n    isChecked,\n    focus,\n    size,\n    checkboxSize,\n    hasOwnLabel,\n  }\n}\n\nconst useDisabled = (\n  props: IUseCheckboxProps,\n  {\n    model,\n    isChecked,\n  }: Partial<ReturnType<typeof useModel>> &\n    Partial<ReturnType<typeof useCheckboxStatus>>\n) => {\n  const { elForm, isGroup, checkboxGroup } = useCheckboxGroup()\n  const isLimitDisabled = computed(() => {\n    const max = checkboxGroup.max?.value!\n    const min = checkboxGroup.min?.value!\n    return (\n      (!!(max || min) && model!.value.length >= max && !isChecked!.value) ||\n      (model!.value.length <= min && isChecked!.value)\n    )\n  })\n  const isDisabled = computed(() => {\n    const disabled = props.disabled || elForm?.disabled\n    return (\n      (isGroup.value\n        ? checkboxGroup.disabled?.value || disabled || isLimitDisabled.value\n        : disabled) ?? false\n    )\n  })\n\n  return {\n    isDisabled,\n    isLimitDisabled,\n  }\n}\n\nconst setStoreValue = (\n  props: IUseCheckboxProps,\n  { model }: Partial<ReturnType<typeof useModel>>\n) => {\n  function addToStore() {\n    if (Array.isArray(model!.value) && !model!.value.includes(props.label)) {\n      model!.value.push(props.label)\n    } else {\n      model!.value = props.trueLabel || true\n    }\n  }\n  props.checked && addToStore()\n}\n\nconst useEvent = (\n  props: IUseCheckboxProps,\n  {\n    model,\n    isLimitExceeded,\n    hasOwnLabel,\n    isDisabled,\n    isLabeledByFormItem,\n  }: Partial<\n    ReturnType<typeof useModel> &\n      ReturnType<typeof useCheckboxStatus> &\n      ReturnType<typeof useDisabled> &\n      ReturnType<typeof useFormItemInputId>\n  >\n) => {\n  const { elFormItem } = useCheckboxGroup()\n  const { emit } = getCurrentInstance()!\n\n  function getLabeledValue(value: string | number | boolean) {\n    return value === props.trueLabel || value === true\n      ? props.trueLabel ?? true\n      : props.falseLabel ?? false\n  }\n\n  function emitChangeEvent(\n    checked: string | number | boolean,\n    e: InputEvent | MouseEvent\n  ) {\n    emit('change', getLabeledValue(checked), e)\n  }\n\n  function handleChange(e: InputEvent) {\n    if (isLimitExceeded!.value) return\n    const target = e.target as HTMLInputElement\n    emit('change', getLabeledValue(target.checked), e)\n  }\n\n  async function onClickRoot(e: MouseEvent) {\n    if (isLimitExceeded!.value) return\n    if (\n      !hasOwnLabel!.value &&\n      !isDisabled!.value &&\n      isLabeledByFormItem!.value\n    ) {\n      model!.value = getLabeledValue(\n        [false, props.falseLabel].includes(model!.value)\n      )\n      await nextTick()\n      emitChangeEvent(model!.value, e)\n    }\n  }\n\n  watch(\n    () => props.modelValue,\n    () => {\n      elFormItem?.validate?.('change').catch((err) => debugWarn(err))\n    }\n  )\n\n  return {\n    handleChange,\n    onClickRoot,\n  }\n}\n\nexport const useCheckbox = (\n  props: IUseCheckboxProps,\n  slots: ComponentInternalInstance['slots']\n) => {\n  const { model, isGroup, isLimitExceeded, elFormItem } = useModel(props)\n  const { focus, size, isChecked, checkboxSize, hasOwnLabel } =\n    useCheckboxStatus(props, slots, {\n      model,\n    })\n  const { isDisabled } = useDisabled(props, { model, isChecked })\n  const { inputId, isLabeledByFormItem } = useFormItemInputId(props, {\n    formItemContext: elFormItem,\n    disableIdGeneration: hasOwnLabel,\n    disableIdManagement: isGroup,\n  })\n  const { handleChange, onClickRoot } = useEvent(props, {\n    model,\n    isLimitExceeded,\n    hasOwnLabel,\n    isDisabled,\n    isLabeledByFormItem,\n  })\n\n  setStoreValue(props, { model })\n\n  return {\n    elFormItem,\n    inputId,\n    isLabeledByFormItem,\n    isChecked,\n    isDisabled,\n    isGroup,\n    checkboxSize,\n    hasOwnLabel,\n    model,\n    handleChange,\n    onClickRoot,\n    focus,\n    size,\n  }\n}\n"]},"metadata":{},"sourceType":"module"}