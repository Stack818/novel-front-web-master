{"ast":null,"code":"import { reactive, toRefs, onMounted } from \"vue\";\nimport { useRouter, useRoute } from \"vue-router\";\nimport { listUpdateRankBooks } from \"@/api/book\";\nexport default {\n  name: \"BookUpdateRank\",\n  setup() {\n    const route = useRoute();\n    const router = useRouter();\n    const state = reactive({\n      booksRank: [],\n      booksList: [],\n      imgBaseUrl: process.env.VUE_APP_BASE_IMG_URL\n    });\n    onMounted(async () => {\n      const {\n        data\n      } = await listUpdateRankBooks();\n      state.booksList = data;\n      await data.forEach(book => {\n        if (state.booksRank.length < 10) {\n          state.booksRank[state.booksRank.length] = book;\n        }\n      });\n    });\n    const bookDetail = bookId => {\n      router.push({\n        path: `/book/${bookId}`\n      });\n    };\n    return {\n      ...toRefs(state),\n      bookDetail\n    };\n  }\n};","map":{"version":3,"mappings":"AAqFA,SAASA,QAAQ,EAAEC,MAAM,EAAEC,SAAQ,QAAS,KAAK;AACjD,SAASC,SAAS,EAAEC,QAAO,QAAS,YAAY;AAChD,SAASC,mBAAkB,QAAS,YAAY;AAChD,eAAe;EACbC,IAAI,EAAE,gBAAgB;EACtBC,KAAKA,GAAG;IACN,MAAMC,KAAI,GAAIJ,QAAQ,CAAC,CAAC;IACxB,MAAMK,MAAK,GAAIN,SAAS,CAAC,CAAC;IAC1B,MAAMO,KAAI,GAAIV,QAAQ,CAAC;MACrBW,SAAS,EAAE,EAAE;MACbC,SAAS,EAAE,EAAE;MACbC,UAAU,EAAEC,OAAO,CAACC,GAAG,CAACC;IAC1B,CAAC,CAAC;IAEFd,SAAS,CAAC,YAAY;MACpB,MAAM;QAAEe;MAAK,IAAI,MAAMZ,mBAAmB,CAAC,CAAC;MAC5CK,KAAK,CAACE,SAAQ,GAAIK,IAAI;MACtB,MAAMA,IAAI,CAACC,OAAO,CAAEC,IAAI,IAAK;QAC3B,IAAIT,KAAK,CAACC,SAAS,CAACS,MAAK,GAAI,EAAE,EAAE;UAC/BV,KAAK,CAACC,SAAS,CAACD,KAAK,CAACC,SAAS,CAACS,MAAM,IAAID,IAAI;QAChD;MACF,CAAC,CAAC;IACJ,CAAC,CAAC;IAEF,MAAME,UAAS,GAAKC,MAAM,IAAK;MAC7Bb,MAAM,CAACc,IAAI,CAAC;QAAEC,IAAI,EAAG,SAAQF,MAAO;MAAE,CAAC,CAAC;IAC1C,CAAC;IACD,OAAO;MACL,GAAGrB,MAAM,CAACS,KAAK,CAAC;MAChBW;IACF,CAAC;EACH;AACF,CAAC","names":["reactive","toRefs","onMounted","useRouter","useRoute","listUpdateRankBooks","name","setup","route","router","state","booksRank","booksList","imgBaseUrl","process","env","VUE_APP_BASE_IMG_URL","data","forEach","book","length","bookDetail","bookId","push","path"],"sourceRoot":"","sources":["D:\\desktop\\novel-front-web-master\\src\\components\\home\\BookUpdateRank.vue"],"sourcesContent":["<template>\n  <div class=\"channelWrap channelTable cf\">\n    <div class=\"leftBox\">\n      <div class=\"title\">\n        <h2>最新更新</h2>\n      </div>\n      <div class=\"updateTable\">\n        <table cellpadding=\"0\" cellspacing=\"0\">\n          <thead>\n            <tr>\n              <th class=\"style\">类别</th>\n              <th class=\"name\">书名</th>\n              <th class=\"chapter\">最新章节</th>\n              <th class=\"author\">作者</th>\n              <th class=\"time\">更新时间</th>\n            </tr>\n          </thead>\n          <tbody id=\"newRankBooks2\">\n            <tr v-for=\"(item, index) in booksList\" :key=\"index\">\n              <td class=\"style\">\n                <a href=\"javascript:void(0)\" @click=\"bookDetail(item.id)\">[{{ item.categoryName }}]</a>\n              </td>\n              <td class=\"name\">\n                <a href=\"javascript:void(0)\" @click=\"bookDetail(item.id)\">{{ item.bookName }}</a>\n              </td>\n              <td class=\"chapter\">\n                <a href=\"javascript:void(0)\" @click=\"bookDetail(item.id)\">{{\n                  item.lastChapterName\n                }}</a>\n                <i class=\"\"></i>\n              </td>\n              <td class=\"author\">\n                <a href=\"javascript:void(0)\">{{ item.authorName }}</a>\n              </td>\n              <td class=\"time\">{{ item.lastChapterUpdateTime }}</td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n    </div>\n    <div id=\"bookrank5_ShowBookRank\">\n      <div class=\"rightBox mb20\">\n        <div class=\"title cf\">\n          <h3 class=\"on\">更新榜单</h3>\n        </div>\n        <div class=\"rightList\">\n          <ul id=\"updateRankBooks\">\n            <li\n              v-for=\"(item, index) in booksRank\"\n              :key=\"index\"\n              :class=\"['num' + (Number(`${index}`) + 1), { on: index == 0 }]\"\n            >\n              <div class=\"book_name\">\n                <i>{{ index + 1 }}</i\n                ><a class=\"name\" href=\"javascript:void(0)\" @click=\"bookDetail(item.id)\">{{\n                  item.bookName\n                }}</a>\n              </div>\n              <div class=\"book_intro\">\n                <div class=\"cover\">\n                  <a href=\"javascript:void(0)\" @click=\"bookDetail(item.id)\"\n                    ><img\n                      :src=\"`${imgBaseUrl}` + `${item.picUrl}`\"\n                      :alt=\"item.bookName\"\n                      onerror=\"this.src='default.gif';this.onerror=null\"\n                  /></a>\n                </div>\n                <a\n                  class=\"txt\"\n                  href=\"javascript:void(0)\" @click=\"bookDetail(item.id)\"\n                  v-html=\"item.bookDesc\"\n                ></a>\n              </div>\n            </li>\n          </ul>\n          <div class=\"more\">\n            <router-link :to=\"{ name: 'bookRank' }\">查看更多&gt;</router-link>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { reactive, toRefs, onMounted } from \"vue\";\nimport { useRouter, useRoute } from \"vue-router\";\nimport { listUpdateRankBooks } from \"@/api/book\";\nexport default {\n  name: \"BookUpdateRank\",\n  setup() {\n    const route = useRoute();\n    const router = useRouter();\n    const state = reactive({\n      booksRank: [],\n      booksList: [],\n      imgBaseUrl: process.env.VUE_APP_BASE_IMG_URL,\n    });\n\n    onMounted(async () => {\n      const { data } = await listUpdateRankBooks();\n      state.booksList = data;\n      await data.forEach((book) => {\n        if (state.booksRank.length < 10) {\n          state.booksRank[state.booksRank.length] = book;\n        }\n      });\n    });\n\n    const bookDetail = (bookId) => {\n      router.push({ path: `/book/${bookId}` });\n    };\n    return {\n      ...toRefs(state),\n      bookDetail,\n    };\n  },\n};\n</script>"]},"metadata":{},"sourceType":"module"}