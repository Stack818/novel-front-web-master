{"ast":null,"code":"import { reactive, toRefs, onMounted } from \"vue\";\nimport { useRouter, useRoute } from \"vue-router\";\nimport { listHomeBooks } from \"@/api/home\";\nimport { ElMessage, ElLoading } from \"element-plus\";\nimport Header from \"@/components/common/Header\";\nimport Footer from \"@/components/common/Footer\";\nimport LatestNews from \"@/components/home/LatestNews\";\nimport FriendLink from \"@/components/home/FriendLink\";\nimport BookVisitRank from \"@/components/home/BookVisitRank\";\nimport BookNewestRank from \"@/components/home/BookNewestRank\";\nimport BookUpdateRank from \"@/components/home/BookUpdateRank\";\nexport default {\n  name: \"home\",\n  components: {\n    Header,\n    LatestNews,\n    FriendLink,\n    BookVisitRank,\n    BookNewestRank,\n    BookUpdateRank,\n    Footer\n  },\n  setup() {\n    const route = useRoute();\n    const router = useRouter();\n    const state = reactive({\n      // 轮播图\n      sliderContent: [],\n      // 顶部栏\n      topBooks1: [],\n      //本周强推\n      weekcommend: [],\n      // 热门推荐\n      hotRecommend: [],\n      // 精品推荐\n      goodRecommend: [],\n      imgBaseUrl: process.env.VUE_APP_BASE_IMG_URL\n    });\n    onMounted(async () => {\n      const loadingInstance = ElLoading.service({\n        target: \"#topBooks2\",\n        text: \"加载中。。。\"\n      });\n      const {\n        data\n      } = await listHomeBooks();\n      loadingInstance.close();\n      await data.forEach(book => {\n        if (book.type == 0) {\n          // 轮播图\n          state.sliderContent[state.sliderContent.length] = book;\n        }\n        if (book.type == 1) {\n          // 顶部栏\n          state.topBooks1[state.topBooks1.length] = book;\n        }\n        if (book.type == 2) {\n          //本周强推\n          state.weekcommend[state.weekcommend.length] = book;\n        }\n        if (book.type == 3) {\n          //热门推荐\n          state.hotRecommend[state.hotRecommend.length] = book;\n        }\n        if (book.type == 4) {\n          //精品推荐\n          state.goodRecommend[state.goodRecommend.length] = book;\n        }\n      });\n      var $div = $(\".scBigImg dl\"); //放置大图容器\n      var $nav = $(\".scSmallImg li\"); //放置缩略图容器\n      var num = -1;\n      var open;\n      function changeKv() {\n        if (num >= $nav.length - 1) {\n          num = 0;\n        } else {\n          num++;\n        }\n        $nav.eq(num).trigger(\"mouseenter\");\n        open = setTimeout(changeKv, 3000);\n      }\n      changeKv();\n      $nav.each(function (index) {\n        $(this).off(\"mouseenter\").on(\"mouseenter\", function () {\n          clearTimeout(open);\n          $(this).addClass(\"on\").siblings().removeClass(\"on\");\n          $(\".scBigImg dd\").eq(index).addClass(\"on\").siblings().removeClass(\"on\");\n          $(\".scSmallImg\").off(\"mouseleave\").on(\"mouseleave\", function () {\n            num = index;\n            setTimeout(function () {\n              changeKv();\n            }, 3000);\n          });\n        });\n      });\n      $div.each(function () {\n        $(this).off(\"mouseenter\").on(\"mouseenter\", function () {\n          clearTimeout(open);\n        });\n      });\n    });\n    const bookDetail = bookId => {\n      router.push({\n        path: `/book/${bookId}`\n      });\n    };\n    return {\n      ...toRefs(state),\n      bookDetail\n    };\n  }\n};","map":{"version":3,"mappings":"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","names":["reactive","toRefs","onMounted","useRouter","useRoute","listHomeBooks","ElMessage","ElLoading","Header","Footer","LatestNews","FriendLink","BookVisitRank","BookNewestRank","BookUpdateRank","name","components","setup","route","router","state","sliderContent","topBooks1","weekcommend","hotRecommend","goodRecommend","imgBaseUrl","process","env","VUE_APP_BASE_IMG_URL","loadingInstance","service","target","text","data","close","forEach","book","type","length","$div","$","$nav","num","open","changeKv","eq","trigger","setTimeout","each","index","off","on","clearTimeout","addClass","siblings","removeClass","bookDetail","bookId","push","path"],"sourceRoot":"","sources":["D:\\desktop\\novel-front-web-master\\src\\views\\Home.vue"],"sourcesContent":["<template>\n  <Header />\n  <div class=\"main box_center cf\">\n    <div class=\"channelWrap channelBanner cf\">\n      <div class=\"leftBox\">\n        <div class=\"sliderContent\">\n          <dl class=\"scBigImg\" id=\"carouseBig\">\n            <dd\n              v-for=\"(item, index) in sliderContent\"\n              :key=\"index\"\n              :class=\"{ on: index == 0 }\"\n            >\n              <a href=\"javascript:void(0)\" @click=\"bookDetail(item.bookId)\">\n                <img\n                  :src=\"`${imgBaseUrl}` + `${item.picUrl}`\"\n                  :alt=\"item.bookName\"\n                  onerror=\"this.src='default.gif';this.onerror=null\"\n                />\n              </a>\n            </dd>\n          </dl>\n          <div class=\"scSmallImg\" id=\"carouseSmall\">\n            <ul>\n              <li\n                v-for=\"(item, index) in sliderContent\"\n                :key=\"index\"\n                :class=\"{ on: index == 0 }\"\n              >\n                <img\n                  :src=\"`${imgBaseUrl}` + `${item.picUrl}`\"\n                  :alt=\"item.bookName\"\n                  onerror=\"this.src='default.gif';this.onerror=null\"\n                />\n              </li>\n            </ul>\n          </div>\n        </div>\n        <div class=\"hot_articles\">\n          <dl class=\"hot_recommend\" id=\"topBooks1\">\n            <dt>\n              <a href=\"javascript:void(0)\" @click=\"bookDetail(topBooks1[0].bookId)\" v-if=\"topBooks1[0]\">{{\n                topBooks1[0].bookName\n              }}</a>\n            </dt>\n            <dd>\n              <a href=\"javascript:void(0)\" @click=\"bookDetail(topBooks1[1].bookId)\" v-if=\"topBooks1[1]\">{{\n                topBooks1[1].bookName\n              }}</a\n              ><a href=\"javascript:void(0)\" @click=\"bookDetail(topBooks1[2].bookId)\" v-if=\"topBooks1[2]\">{{\n                topBooks1[2].bookName\n              }}</a>\n            </dd>\n            <dd>\n              <a href=\"javascript:void(0)\" @click=\"bookDetail(topBooks1[3].bookId)\" v-if=\"topBooks1[3]\">{{\n                topBooks1[3].bookName\n              }}</a\n              ><a href=\"javascript:void(0)\" @click=\"bookDetail(topBooks1[4].bookId)\" v-if=\"topBooks1[4]\">{{\n                topBooks1[4].bookName\n              }}</a>\n            </dd>\n          </dl>\n          <dl class=\"hot_recommend\" id=\"topBooks2\">\n            <dt>\n              <a href=\"javascript:void(0)\" @click=\"bookDetail(topBooks1[5].bookId)\" v-if=\"topBooks1[5]\">{{\n                topBooks1[5].bookName\n              }}</a>\n            </dt>\n            <dd>\n              <a href=\"javascript:void(0)\" @click=\"bookDetail(topBooks1[6].bookId)\" v-if=\"topBooks1[6]\">{{\n                topBooks1[6].bookName\n              }}</a\n              ><a href=\"javascript:void(0)\" @click=\"bookDetail(topBooks1[7].bookId)\" v-if=\"topBooks1[7]\">{{\n                topBooks1[7].bookName\n              }}</a>\n            </dd>\n            <dd>\n              <a href=\"javascript:void(0)\" @click=\"bookDetail(topBooks1[8].bookId)\" v-if=\"topBooks1[8]\">{{\n                topBooks1[8].bookName\n              }}</a\n              ><a href=\"javascript:void(0)\" @click=\"bookDetail(topBooks1[9].bookId)\" v-if=\"topBooks1[9]\">{{\n                topBooks1[9].bookName\n              }}</a>\n            </dd>\n          </dl>\n\n          <LatestNews />\n        </div>\n      </div>\n      <div class=\"rightBox\">\n        <div class=\"title cf\" id=\"weekcommend\">\n          <h3>本周强推</h3>\n        </div>\n        <div class=\"rightList\">\n          <ul id=\"currentWeek\">\n            <li\n              v-for=\"(item, index) in weekcommend\"\n              :key=\"index\"\n              :class=\"['num' + (Number(`${index}`) + 1), { on: index == 0 }]\"\n            >\n              <div class=\"book_name\">\n                <i>{{ index + 1 }}</i\n                ><a class=\"name\" href=\"javascript:void(0)\" @click=\"bookDetail(item.bookId)\">{{\n                  item.bookName\n                }}</a>\n              </div>\n              <div class=\"book_intro\">\n                <div class=\"cover\">\n                  <a href=\"javascript:void(0)\" @click=\"bookDetail(item.bookId)\"\n                    ><img\n                      :src=\"`${imgBaseUrl}` + `${item.picUrl}`\"\n                      :alt=\"item.bookName\"\n                      onerror=\"this.src='default.gif';this.onerror=null\"\n                  /></a>\n                </div>\n                <a\n                  class=\"txt\"\n                  href=\"javascript:void(0)\" @click=\"bookDetail(item.bookId)\"\n                  v-html=\"item.bookDesc\"\n                ></a>\n              </div>\n            </li>\n          </ul>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"channelWrap channelPic cf\">\n      <div class=\"leftBox\">\n        <div class=\"title\">\n          <h2 class=\"on\">热门推荐</h2>\n        </div>\n        <div class=\"picRecommend cf\" id=\"hotRecBooks\">\n          <div\n            class=\"itemsList\"\n            v-for=\"(item, index) in hotRecommend\"\n            :key=\"index\"\n          >\n            <a class=\"items_img\" href=\"javascript:void(0)\" @click=\"bookDetail(item.bookId)\">\n              <img\n                :src=\"`${imgBaseUrl}` + `${item.picUrl}`\"\n                onerror=\"this.src='default.gif';this.onerror=null\"\n                :alt=\"item.bookName\"\n              />\n            </a>\n            <div class=\"items_txt\">\n              <h4>\n                <a href=\"javascript:void(0)\" @click=\"bookDetail(item.bookId)\">{{ item.bookName }}</a>\n              </h4>\n              <p class=\"author\">\n                <a href=\"javascript:void(0)\">作者：{{ item.authorName }}</a>\n              </p>\n              <p class=\"intro\">\n                <a\n                  href=\"javascript:void(0)\" @click=\"bookDetail(item.bookId)\"\n                  v-html=\"item.bookDesc\"\n                ></a>\n              </p>\n            </div>\n          </div>\n        </div>\n      </div>\n      <BookVisitRank />\n    </div>\n    <div class=\"channelWrap channelPic cf\">\n      <div class=\"leftBox\">\n        <div class=\"title\">\n          <h2>精品推荐</h2>\n        </div>\n\n        <div class=\"picRecommend cf\" id=\"classicBooks\">\n          <div\n            class=\"itemsList\"\n            v-for=\"(item, index) in goodRecommend\"\n            :key=\"index\"\n          >\n            <a class=\"items_img\" href=\"javascript:void(0)\" @click=\"bookDetail(item.bookId)\">\n              <img\n                :src=\"`${imgBaseUrl}` + `${item.picUrl}`\"\n                onerror=\"this.src='default.gif';this.onerror=null\"\n              />\n            </a>\n            <div class=\"items_txt\">\n              <h4>\n                <a href=\"javascript:void(0)\" @click=\"bookDetail(item.bookId)\">{{ item.bookName }}</a>\n              </h4>\n              <p class=\"author\">\n                <a href=\"javascript:void(0)\">作者：{{ item.authorName }}</a>\n              </p>\n              <p class=\"intro\">\n                <a\n                  href=\"javascript:void(0)\" @click=\"bookDetail(item.bookId)\"\n                  v-html=\"item.bookDesc\"\n                ></a>\n              </p>\n            </div>\n          </div>\n        </div>\n      </div>\n      <BookNewestRank />\n    </div>\n\n    <BookUpdateRank />\n  </div>\n  <FriendLink />\n\n  <Footer />\n</template>\n\n<script>\nimport { reactive, toRefs, onMounted } from \"vue\";\nimport { useRouter, useRoute } from \"vue-router\";\nimport { listHomeBooks } from \"@/api/home\";\nimport { ElMessage, ElLoading } from \"element-plus\";\nimport Header from \"@/components/common/Header\";\nimport Footer from \"@/components/common/Footer\";\nimport LatestNews from \"@/components/home/LatestNews\";\nimport FriendLink from \"@/components/home/FriendLink\";\nimport BookVisitRank from \"@/components/home/BookVisitRank\";\nimport BookNewestRank from \"@/components/home/BookNewestRank\";\nimport BookUpdateRank from \"@/components/home/BookUpdateRank\";\nexport default {\n  name: \"home\",\n  components: {\n    Header,\n    LatestNews,\n    FriendLink,\n    BookVisitRank,\n    BookNewestRank,\n    BookUpdateRank,\n    Footer,\n  },\n  setup() {\n    const route = useRoute();\n    const router = useRouter();\n    const state = reactive({\n      // 轮播图\n      sliderContent: [],\n      // 顶部栏\n      topBooks1: [],\n      //本周强推\n      weekcommend: [],\n      // 热门推荐\n      hotRecommend: [],\n      // 精品推荐\n      goodRecommend: [],\n      imgBaseUrl: process.env.VUE_APP_BASE_IMG_URL,\n    });\n\n    onMounted(async () => {\n      const loadingInstance = ElLoading.service({\n        target: \"#topBooks2\",\n        text: \"加载中。。。\",\n      });\n      const { data } = await listHomeBooks();\n      loadingInstance.close();\n\n      await data.forEach((book) => {\n        if (book.type == 0) {\n          // 轮播图\n          state.sliderContent[state.sliderContent.length] = book;\n        }\n        if (book.type == 1) {\n          // 顶部栏\n          state.topBooks1[state.topBooks1.length] = book;\n        }\n        if (book.type == 2) {\n          //本周强推\n          state.weekcommend[state.weekcommend.length] = book;\n        }\n        if (book.type == 3) {\n          //热门推荐\n          state.hotRecommend[state.hotRecommend.length] = book;\n        }\n        if (book.type == 4) {\n          //精品推荐\n          state.goodRecommend[state.goodRecommend.length] = book;\n        }\n      });\n\n      var $div = $(\".scBigImg dl\"); //放置大图容器\n      var $nav = $(\".scSmallImg li\"); //放置缩略图容器\n      var num = -1;\n      var open;\n\n      function changeKv() {\n        if (num >= $nav.length - 1) {\n          num = 0;\n        } else {\n          num++;\n        }\n        $nav.eq(num).trigger(\"mouseenter\");\n        open = setTimeout(changeKv, 3000);\n      }\n\n      changeKv();\n      $nav.each(function (index) {\n        $(this)\n          .off(\"mouseenter\")\n          .on(\"mouseenter\", function () {\n            clearTimeout(open);\n\n            $(this).addClass(\"on\").siblings().removeClass(\"on\");\n            $(\".scBigImg dd\")\n              .eq(index)\n              .addClass(\"on\")\n              .siblings()\n              .removeClass(\"on\");\n            $(\".scSmallImg\")\n              .off(\"mouseleave\")\n              .on(\"mouseleave\", function () {\n                num = index;\n                setTimeout(function () {\n                  changeKv();\n                }, 3000);\n              });\n          });\n      });\n      $div.each(function () {\n        $(this)\n          .off(\"mouseenter\")\n          .on(\"mouseenter\", function () {\n            clearTimeout(open);\n          });\n      });\n    });\n\n    const bookDetail = (bookId) => {\n      router.push({ path: `/book/${bookId}` });\n    };\n\n    return {\n      ...toRefs(state),\n      bookDetail,\n    };\n  }\n};\n</script>\n"]},"metadata":{},"sourceType":"module"}