{"ast":null,"code":"import { defineComponent, ref, nextTick, onMounted, provide, reactive, toRefs, watch, openBlock, createElementBlock, normalizeClass, renderSlot } from 'vue';\nimport '../../../constants/index2.mjs';\nimport '../../../tokens/index2.mjs';\nimport '../../../hooks/index2.mjs';\nimport '../../../utils/index2.mjs';\nimport { radioGroupProps, radioGroupEmits } from './radio-group3.mjs';\nimport _export_sfc from '../../../_virtual/plugin-vue_export-helper.mjs';\nimport { useNamespace } from '../../../hooks/use-namespace/index2.mjs';\nimport { useFormItem, useFormItemInputId } from '../../../hooks/use-form-item/index2.mjs';\nimport { UPDATE_MODEL_EVENT } from '../../../constants/event2.mjs';\nimport { EVENT_CODE } from '../../../constants/aria2.mjs';\nimport { radioGroupKey } from '../../../tokens/radio2.mjs';\nimport { debugWarn } from '../../../utils/error2.mjs';\nconst _sfc_main = defineComponent({\n  name: \"ElRadioGroup\",\n  props: radioGroupProps,\n  emits: radioGroupEmits,\n  setup(props, ctx) {\n    const ns = useNamespace(\"radio\");\n    const radioGroupRef = ref();\n    const {\n      formItem\n    } = useFormItem();\n    const {\n      inputId: groupId,\n      isLabeledByFormItem\n    } = useFormItemInputId(props, {\n      formItemContext: formItem\n    });\n    const changeEvent = value => {\n      ctx.emit(UPDATE_MODEL_EVENT, value);\n      nextTick(() => ctx.emit(\"change\", value));\n    };\n    const handleKeydown = e => {\n      if (!radioGroupRef.value) return;\n      const target = e.target;\n      const className = target.nodeName === \"INPUT\" ? \"[type=radio]\" : \"[role=radio]\";\n      const radios = radioGroupRef.value.querySelectorAll(className);\n      const length = radios.length;\n      const index = Array.from(radios).indexOf(target);\n      const roleRadios = radioGroupRef.value.querySelectorAll(\"[role=radio]\");\n      let nextIndex = null;\n      switch (e.code) {\n        case EVENT_CODE.left:\n        case EVENT_CODE.up:\n          e.stopPropagation();\n          e.preventDefault();\n          nextIndex = index === 0 ? length - 1 : index - 1;\n          break;\n        case EVENT_CODE.right:\n        case EVENT_CODE.down:\n          e.stopPropagation();\n          e.preventDefault();\n          nextIndex = index === length - 1 ? 0 : index + 1;\n          break;\n        default:\n          break;\n      }\n      if (nextIndex === null) return;\n      roleRadios[nextIndex].click();\n      roleRadios[nextIndex].focus();\n    };\n    onMounted(() => {\n      const radios = radioGroupRef.value.querySelectorAll(\"[type=radio]\");\n      const firstLabel = radios[0];\n      if (!Array.from(radios).some(radio => radio.checked) && firstLabel) {\n        firstLabel.tabIndex = 0;\n      }\n    });\n    provide(radioGroupKey, reactive({\n      ...toRefs(props),\n      changeEvent\n    }));\n    watch(() => props.modelValue, () => formItem == null ? void 0 : formItem.validate(\"change\").catch(err => debugWarn(err)));\n    return {\n      ns,\n      radioGroupRef,\n      formItem,\n      groupId,\n      isLabeledByFormItem,\n      handleKeydown\n    };\n  }\n});\nconst _hoisted_1 = [\"id\", \"aria-label\", \"aria-labelledby\"];\nfunction _sfc_render(_ctx, _cache, $props, $setup, $data, $options) {\n  return openBlock(), createElementBlock(\"div\", {\n    id: _ctx.groupId,\n    ref: \"radioGroupRef\",\n    class: normalizeClass(_ctx.ns.b(\"group\")),\n    role: \"radiogroup\",\n    \"aria-label\": !_ctx.isLabeledByFormItem ? _ctx.label || \"radio-group\" : void 0,\n    \"aria-labelledby\": _ctx.isLabeledByFormItem ? _ctx.formItem.labelId : void 0,\n    onKeydown: _cache[0] || (_cache[0] = (...args) => _ctx.handleKeydown && _ctx.handleKeydown(...args))\n  }, [renderSlot(_ctx.$slots, \"default\")], 42, _hoisted_1);\n}\nvar RadioGroup = /* @__PURE__ */_export_sfc(_sfc_main, [[\"render\", _sfc_render], [\"__file\", \"/home/runner/work/element-plus/element-plus/packages/components/radio/src/radio-group.vue\"]]);\nexport { RadioGroup as default };","map":{"version":3,"mappings":";;;;;;;;;;;;;AAoCA,MAAKA,YAAaC,eAAa;EAC7BC,IAAM;EACNC,KAAO;EACPC,KAAO;EAEPC,MAAMF,OAAOG,GAAK;IACV,WAAKC,aAAa,OAAO;IAC/B,MAAMC,gBAAgBC,GAAoB;IACpC;MAAEC;IAAA,IAAaC,WAAY;IACjC,MAAM;MAAEC,SAASC,OAAS;MAAAC;IAAA,IAAwBC,mBAChDZ,KACA;MACEa,eAAiB;IAAA,CAErB;IAEM,oBAAeC,KAAyC;MACxDX,SAAKY,oBAAoBD,KAAK;MAClCE,SAAS,MAAMb,IAAIc,IAAK,WAAUH,KAAK,CAAC;IAAA,CAC1C;IAEM,sBAAiBI,CAAqB;MAC1C,IAAI,CAACb,aAAc,QAAO;MAG1B,MAAMc,SAASD,CAAE;MACjB,MAAME,SACJ,UAAOC,QAAa,eAAU,cAAiB;MACjD,MAAMC,MACJ,iBAAcR,KAAM,kBAAmCM,SAAS;MAClE,MAAMG,SAASD,MAAO;MACtB,MAAME,QAAQC,KAAM,MAAKH,MAAM,EAAEI,QAAQP,MAAM;MAC/C,MAAMQ,UACJ,iBAAcb,KAAM,kBAAmC,cAAc;MAEvE,IAAIc,SAA2B;MAC/B,QAAQV,CAAE;QAAA,KACHW,UAAW;QAAA,KACXA,UAAW;UACdX,EAAEY,eAAgB;UAClBZ,EAAEa,cAAe;UACjBH,YAAYJ,KAAU,SAAID,MAAS,OAAIC,KAAQ;UAC/C;QAAA,KACGK,UAAW;QAAA,KACXA,UAAW;UACdX,EAAEY,eAAgB;UAClBZ,EAAEa,cAAe;UACjBH,YAAYJ,KAAU,cAAS,CAAI,OAAIA,KAAQ;UAC/C;QAAA;UAEA;MAAA;MAEJ,IAAII,SAAc,WAAM;MACxBD,WAAWC,WAAWI,KAAM;MAC5BL,WAAWC,WAAWK,KAAM;IAAA,CAC9B;IAEAC,UAAU,MAAM;MACd,MAAMZ,MACJ,iBAAcR,KAAO,kBAAmC,cAAc;MACxE,MAAMqB,aAAab,MAAO;MACtB,KAACG,KAAM,MAAKH,MAAM,EAAEc,IAAK,CAACC,KAAU,UAAMC,OAAO,KAAKH,UAAY;QACpEA,WAAWI,QAAW;MAAA;IACxB,CACD;IAEDC,QACEC,eACAC,QAAS;MAAA,GACJC,OAAO3C,KAAK;MACf4C;IAAA,CACD,CACH;IAEAC,MACE,MAAM7C,MAAM8C,UACZ,QAAMvC,YAAmB,gBAAUA,QAAO,SAAkB,gBAC9D;IAEO;MACLwC;MACA1C;MACAE;MACAG;MACAC;MACAqC;IAAA,CACF;EAAA;AAEJ,CAAC;;;sBA3HCC,kBAUM;IATHC,EAAI;IACL5C,GAAI;IACH6C,OAAKC,cAAE,SAAGC,CAAC;IACZC,IAAK;IACJ,YAAU,GAAGC,IAAsB,qCAAK,aAAoB;IAC5D,mBAAiBA,IAAsB,qCAASC,OAAU;IAC1DC,WAAOC,MAAE;EAAA,IAEVC,UAAQ","names":["_sfc_main","defineComponent","name","props","emits","setup","ctx","useNamespace","radioGroupRef","ref","formItem","useFormItem","inputId","groupId","isLabeledByFormItem","useFormItemInputId","formItemContext","value","UPDATE_MODEL_EVENT","nextTick","emit","e","target","className","nodeName","radios","length","index","Array","indexOf","roleRadios","nextIndex","EVENT_CODE","stopPropagation","preventDefault","click","focus","onMounted","firstLabel","some","radio","checked","tabIndex","provide","radioGroupKey","reactive","toRefs","changeEvent","watch","modelValue","ns","handleKeydown","_createElementBlock","id","class","_normalizeClass","b","role","_ctx","labelId","onKeydown","_cache","_renderSlot"],"sources":["../../../../../../packages/components/radio/src/radio-group.vue"],"sourcesContent":["<template>\n  <div\n    :id=\"groupId\"\n    ref=\"radioGroupRef\"\n    :class=\"ns.b('group')\"\n    role=\"radiogroup\"\n    :aria-label=\"!isLabeledByFormItem ? label || 'radio-group' : undefined\"\n    :aria-labelledby=\"isLabeledByFormItem ? formItem.labelId : undefined\"\n    @keydown=\"handleKeydown\"\n  >\n    <slot />\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport {\n  defineComponent,\n  nextTick,\n  onMounted,\n  provide,\n  reactive,\n  ref,\n  toRefs,\n  watch,\n} from 'vue'\nimport { EVENT_CODE, UPDATE_MODEL_EVENT } from '@element-plus/constants'\nimport { radioGroupKey } from '@element-plus/tokens'\nimport {\n  useFormItem,\n  useFormItemInputId,\n  useNamespace,\n} from '@element-plus/hooks'\nimport { debugWarn } from '@element-plus/utils'\nimport { radioGroupEmits, radioGroupProps } from './radio-group'\nimport type { RadioGroupProps } from '..'\n\nexport default defineComponent({\n  name: 'ElRadioGroup',\n  props: radioGroupProps,\n  emits: radioGroupEmits,\n\n  setup(props, ctx) {\n    const ns = useNamespace('radio')\n    const radioGroupRef = ref<HTMLDivElement>()\n    const { formItem } = useFormItem()\n    const { inputId: groupId, isLabeledByFormItem } = useFormItemInputId(\n      props,\n      {\n        formItemContext: formItem,\n      }\n    )\n\n    const changeEvent = (value: RadioGroupProps['modelValue']) => {\n      ctx.emit(UPDATE_MODEL_EVENT, value)\n      nextTick(() => ctx.emit('change', value))\n    }\n\n    const handleKeydown = (e: KeyboardEvent) => {\n      if (!radioGroupRef.value) return\n\n      // 左右上下按键 可以在 radio 组内切换不同选项\n      const target = e.target as HTMLInputElement\n      const className =\n        target.nodeName === 'INPUT' ? '[type=radio]' : '[role=radio]'\n      const radios =\n        radioGroupRef.value.querySelectorAll<HTMLInputElement>(className)\n      const length = radios.length\n      const index = Array.from(radios).indexOf(target)\n      const roleRadios =\n        radioGroupRef.value.querySelectorAll<HTMLInputElement>('[role=radio]')\n\n      let nextIndex: number | null = null\n      switch (e.code) {\n        case EVENT_CODE.left:\n        case EVENT_CODE.up:\n          e.stopPropagation()\n          e.preventDefault()\n          nextIndex = index === 0 ? length - 1 : index - 1\n          break\n        case EVENT_CODE.right:\n        case EVENT_CODE.down:\n          e.stopPropagation()\n          e.preventDefault()\n          nextIndex = index === length - 1 ? 0 : index + 1\n          break\n        default:\n          break\n      }\n      if (nextIndex === null) return\n      roleRadios[nextIndex].click()\n      roleRadios[nextIndex].focus()\n    }\n\n    onMounted(() => {\n      const radios =\n        radioGroupRef.value!.querySelectorAll<HTMLInputElement>('[type=radio]')\n      const firstLabel = radios[0]\n      if (!Array.from(radios).some((radio) => radio.checked) && firstLabel) {\n        firstLabel.tabIndex = 0\n      }\n    })\n\n    provide(\n      radioGroupKey,\n      reactive({\n        ...toRefs(props),\n        changeEvent,\n      })\n    )\n\n    watch(\n      () => props.modelValue,\n      () => formItem?.validate('change').catch((err) => debugWarn(err))\n    )\n\n    return {\n      ns,\n      radioGroupRef,\n      formItem,\n      groupId,\n      isLabeledByFormItem,\n      handleKeydown,\n    }\n  },\n})\n</script>\n"]},"metadata":{},"sourceType":"module"}