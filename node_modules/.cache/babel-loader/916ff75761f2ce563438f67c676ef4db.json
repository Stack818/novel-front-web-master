{"ast":null,"code":"import \"@/assets/styles/user.css\";\nimport man from \"@/assets/images/man.png\";\nimport { reactive, toRefs, onMounted, ref } from \"vue\";\nimport { useRouter, useRoute } from \"vue-router\";\nimport { ElMessage } from \"element-plus\";\nimport { Plus } from \"@element-plus/icons-vue\";\nimport { UploadProps } from \"element-plus\";\nimport { getImgVerifyCode } from \"@/api/resource\";\nimport { getUserinfo, updateUserInfo } from \"@/api/user\";\nimport Header from \"@/components/common/Header\";\nimport Footer from \"@/components/common/Footer\";\nimport UserMenu from \"@/components/user/Menu\";\nexport default {\n  name: \"userSetup\",\n  components: {\n    Header,\n    Footer,\n    UserMenu\n  },\n  setup() {\n    const route = useRoute();\n    const router = useRouter();\n    const state = reactive({\n      userPhoto: \"\",\n      nickName: \"\",\n      baseUrl: process.env.VUE_APP_BASE_API_URL,\n      imgBaseUrl: process.env.VUE_APP_BASE_IMG_URL\n    });\n    onMounted(async () => {\n      const {\n        data\n      } = await getUserinfo();\n      state.userPhoto = data.userPhoto;\n      state.nickName = data.nickName;\n    });\n    const beforeAvatarUpload = rawFile => {\n      if (rawFile.type !== \"image/jpeg\") {\n        ElMessage.error(\"必须上传 JPG 格式的图片!\");\n        return false;\n      } else if (rawFile.size / 1024 / 1024 > 5) {\n        ElMessage.error(\"图片大小最多 5MB!\");\n        return false;\n      }\n      return true;\n    };\n    const handleAvatarSuccess = (response, uploadFile) => {\n      state.userPhoto = response.data;\n      updateUserInfo({\n        userPhoto: state.userPhoto\n      });\n    };\n    return {\n      ...toRefs(state),\n      man,\n      beforeAvatarUpload,\n      handleAvatarSuccess\n    };\n  }\n};","map":{"version":3,"mappings":"AA4EA,OAAO,0BAA0B;AACjC,OAAOA,GAAE,MAAO,yBAAyB;AACzC,SAASC,QAAQ,EAAEC,MAAM,EAAEC,SAAS,EAAEC,GAAE,QAAS,KAAK;AACtD,SAASC,SAAS,EAAEC,QAAO,QAAS,YAAY;AAChD,SAASC,SAAQ,QAAS,cAAc;AACxC,SAASC,IAAG,QAAS,yBAAyB;AAC9C,SAASC,WAAU,QAAS,cAAc;AAC1C,SAASC,gBAAe,QAAS,gBAAgB;AACjD,SAASC,WAAW,EAAEC,cAAa,QAAS,YAAY;AACxD,OAAOC,MAAK,MAAO,4BAA4B;AAC/C,OAAOC,MAAK,MAAO,4BAA4B;AAC/C,OAAOC,QAAO,MAAO,wBAAwB;AAC7C,eAAe;EACbC,IAAI,EAAE,WAAW;EACjBC,UAAU,EAAE;IACVJ,MAAM;IACNC,MAAM;IACNC;EACF,CAAC;EACDG,KAAKA,GAAG;IACN,MAAMC,KAAI,GAAIb,QAAQ,CAAC,CAAC;IACxB,MAAMc,MAAK,GAAIf,SAAS,CAAC,CAAC;IAE1B,MAAMgB,KAAI,GAAIpB,QAAQ,CAAC;MACrBqB,SAAS,EAAE,EAAE;MACbC,QAAQ,EAAE,EAAE;MACZC,OAAO,EAAEC,OAAO,CAACC,GAAG,CAACC,oBAAoB;MACzCC,UAAU,EAAEH,OAAO,CAACC,GAAG,CAACG;IAC1B,CAAC,CAAC;IAEF1B,SAAS,CAAC,YAAY;MACpB,MAAM;QAAE2B;MAAK,IAAI,MAAMnB,WAAW,CAAC,CAAC;MACpCU,KAAK,CAACC,SAAQ,GAAIQ,IAAI,CAACR,SAAS;MAChCD,KAAK,CAACE,QAAO,GAAIO,IAAI,CAACP,QAAQ;IAChC,CAAC,CAAC;IAEF,MAAMQ,kBAAiB,GAAKC,OAAO,IAAK;MACtC,IAAIA,OAAO,CAACC,IAAG,KAAM,YAAY,EAAE;QACjC1B,SAAS,CAAC2B,KAAK,CAAC,iBAAiB,CAAC;QAClC,OAAO,KAAK;MACd,OAAO,IAAIF,OAAO,CAACG,IAAG,GAAI,IAAG,GAAI,IAAG,GAAI,CAAC,EAAE;QACzC5B,SAAS,CAAC2B,KAAK,CAAC,aAAa,CAAC;QAC9B,OAAO,KAAK;MACd;MACA,OAAO,IAAI;IACb,CAAC;IAED,MAAME,mBAAkB,GAAIA,CAACC,QAAQ,EAAEC,UAAU,KAAK;MACpDjB,KAAK,CAACC,SAAQ,GAAIe,QAAQ,CAACP,IAAI;MAC/BlB,cAAc,CAAC;QAAEU,SAAS,EAAED,KAAK,CAACC;MAAU,CAAC,CAAC;IAChD,CAAC;IAED,OAAO;MACL,GAAGpB,MAAM,CAACmB,KAAK,CAAC;MAChBrB,GAAG;MACH+B,kBAAkB;MAClBK;IACF,CAAC;EACH;AACF,CAAC","names":["man","reactive","toRefs","onMounted","ref","useRouter","useRoute","ElMessage","Plus","UploadProps","getImgVerifyCode","getUserinfo","updateUserInfo","Header","Footer","UserMenu","name","components","setup","route","router","state","userPhoto","nickName","baseUrl","process","env","VUE_APP_BASE_API_URL","imgBaseUrl","VUE_APP_BASE_IMG_URL","data","beforeAvatarUpload","rawFile","type","error","size","handleAvatarSuccess","response","uploadFile"],"sourceRoot":"","sources":["D:\\desktop\\novel-front-web-master\\src\\views\\UserSetup.vue"],"sourcesContent":["<template>\n  <Header />\n\n  <div class=\"main box_center cf\">\n    <div class=\"userBox cf\">\n      <UserMenu />\n      <div class=\"my_r\">\n        <div class=\"my_info cf\">\n          <div class=\"my_info_txt\">\n            <ul class=\"mytab_list\">\n              <li>\n                <i class=\"tit\">我的头像</i>\n                <el-upload\n                  class=\"avatar-uploader\"\n                  :action=\"baseUrl + '/front/resource/image'\"\n                  :show-file-list=\"false\"\n                  :on-success=\"handleAvatarSuccess\"\n                  :before-upload=\"beforeAvatarUpload\"\n                >\n                  <img\n                    :src=\"userPhoto ? imgBaseUrl + userPhoto : man\"\n                    class=\"avatar\"\n                  />\n                </el-upload>\n                <!--\n                <a style=\"position: relative\">\n                  <img\n                    id=\"imgLogo\"\n                    class=\"user_img\"\n                    alt=\"我的头像\"\n                    :src=\"userPhoto ? (imgBaseUrl + userPhoto) : man\"\n                  />\n                  <input\n                    class=\"opacity\"\n                    onchange=\"picChange()\"\n                    type=\"file\"\n                    id=\"file0\"\n                    name=\"file\"\n                    title=\"点击上传图片\"\n                    style=\"\n                      z-index: 100;\n                      cursor: pointer;\n                      left: 0px;\n                      top: -25px;\n                      width: 60px;\n                      height: 80px;\n                      opacity: 0;\n                      position: absolute;\n                    \"\n                  />\n                </a>-->\n              </li>\n              <li>\n                <i class=\"tit\">我的昵称</i\n                ><a id=\"my_name\"\n                  >{{ nickName\n                  }}<!--<em class=\"ml10\">[修改]</em>--></a\n                >\n              </li>\n              <li style=\"display: none\">\n                <i class=\"tit\">电子邮箱</i><a href=\"javascript:void(0);\"></a>\n              </li>\n              <li>\n                <i class=\"tit\">我的性别</i\n                ><a id=\"my_sex\">男<!--<em class=\"ml10\">[修改]</em>--></a>\n              </li>\n            </ul>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <Footer />\n</template>\n\n<script>\nimport \"@/assets/styles/user.css\";\nimport man from \"@/assets/images/man.png\";\nimport { reactive, toRefs, onMounted, ref } from \"vue\";\nimport { useRouter, useRoute } from \"vue-router\";\nimport { ElMessage } from \"element-plus\";\nimport { Plus } from \"@element-plus/icons-vue\";\nimport { UploadProps } from \"element-plus\";\nimport { getImgVerifyCode } from \"@/api/resource\";\nimport { getUserinfo, updateUserInfo } from \"@/api/user\";\nimport Header from \"@/components/common/Header\";\nimport Footer from \"@/components/common/Footer\";\nimport UserMenu from \"@/components/user/Menu\";\nexport default {\n  name: \"userSetup\",\n  components: {\n    Header,\n    Footer,\n    UserMenu\n  },\n  setup() {\n    const route = useRoute();\n    const router = useRouter();\n\n    const state = reactive({\n      userPhoto: \"\",\n      nickName: \"\",\n      baseUrl: process.env.VUE_APP_BASE_API_URL,\n      imgBaseUrl: process.env.VUE_APP_BASE_IMG_URL,\n    });\n\n    onMounted(async () => {\n      const { data } = await getUserinfo();\n      state.userPhoto = data.userPhoto;\n      state.nickName = data.nickName;\n    });\n\n    const beforeAvatarUpload = (rawFile) => {\n      if (rawFile.type !== \"image/jpeg\") {\n        ElMessage.error(\"必须上传 JPG 格式的图片!\");\n        return false;\n      } else if (rawFile.size / 1024 / 1024 > 5) {\n        ElMessage.error(\"图片大小最多 5MB!\");\n        return false;\n      }\n      return true;\n    };\n\n    const handleAvatarSuccess = (response, uploadFile) => {\n      state.userPhoto = response.data;\n      updateUserInfo({ userPhoto: state.userPhoto });\n    };\n\n    return {\n      ...toRefs(state),\n      man,\n      beforeAvatarUpload,\n      handleAvatarSuccess,\n    };\n  },\n};\n</script>\n\n<style scoped>\n.avatar-uploader .avatar {\n  width: 178px;\n  height: 178px;\n  display: block;\n}\n\n.avatar-uploader .el-upload {\n  border: 1px dashed var(--el-border-color);\n  border-radius: 6px;\n  cursor: pointer;\n  position: relative;\n  overflow: hidden;\n  transition: var(--el-transition-duration-fast);\n}\n\n.avatar-uploader .el-upload:hover {\n  border-color: var(--el-color-primary);\n}\n\n.el-icon.avatar-uploader-icon {\n  font-size: 28px;\n  color: #8c939d;\n  width: 178px;\n  height: 178px;\n  text-align: center;\n}\n\n.updateTable .style a {\n  color: #999;\n}\n.updateTable .author a {\n  color: #999;\n  cursor: text;\n}\n.bind,\n.updateTable .style a:hover {\n  color: #f65167;\n}\n.userBox {\n  /*width: 998px; border: 1px solid #eaeaea;*/\n  margin: 0 auto 50px;\n  background: #fff;\n  border-radius: 6px;\n}\n.channelViewhistory .userBox {\n  margin: 0 auto;\n}\n.user_l {\n  width: 350px;\n  float: left;\n  padding: 100px 124px;\n}\n.user_l h3 {\n  font-size: 23px;\n  font-weight: normal;\n  line-height: 1;\n  text-align: center;\n}\n.user_l #LabErr {\n  color: #ff4040;\n  display: block;\n  height: 40px;\n  line-height: 40px;\n  text-align: center;\n  font-size: 14px;\n}\n.user_l .log_list {\n  width: 350px;\n}\n.user_l .s_input {\n  margin-bottom: 25px;\n  font-size: 14px;\n}\n.s_input {\n  width: 348px;\n  height: 38px;\n  line-height: 38px\\9;\n  vertical-align: middle;\n  border: 1px solid #ddd;\n  border-radius: 2px;\n}\n.icon_name,\n.icon_key,\n.icon_code {\n  width: 312px;\n  padding-left: 36px;\n}\n.icon_key {\n  background-position: 13px -51px;\n}\n.icon_code {\n  background-position: 13px -117px;\n  width: 200px;\n  float: left;\n}\n.code_pic {\n  height: 38px;\n  float: right;\n}\n.btn_phone {\n  height: 40px;\n  width: 100px;\n  float: right;\n  cursor: pointer;\n  padding: 0;\n  text-align: center;\n  border-radius: 2px;\n  background: #dfdfdf;\n}\n.log_code {\n  *padding-bottom: 25px;\n}\n.user_l .btn_red {\n  width: 100%;\n  font-size: 19px;\n  padding: 12px;\n}\n.autologin {\n  color: #999;\n  line-height: 1;\n  margin-bottom: 18px;\n}\n.autologin em {\n  vertical-align: 2px;\n  margin-left: 4px;\n}\n.user_r {\n  width: 259px;\n  margin: 80px 0;\n  padding: 20px 70px;\n  border-left: 1px dotted #e3e3e3;\n  float: right;\n  text-align: center;\n}\n.user_r .tit {\n  font-size: 16px;\n  line-height: 1;\n  padding: 6px 0 25px;\n}\n.user_r .btn_ora {\n  padding: 10px 34px;\n}\n.fast_login {\n  padding: 60px 0 0;\n}\n.fast_list {\n  text-align: center;\n  padding: 0.5rem;\n}\n.fast_list li {\n  display: inline-block;\n  *display: inline;\n  zoom: 1;\n}\n.fast_list li .img {\n  width: 48px;\n  height: 48px;\n  margin: 20px 0 5px;\n}\n.fast_list li a:hover {\n  opacity: 0.8;\n  filter: alpha(opacity=80);\n  -moz-opacity: 0.8;\n}\n.fast_list li span {\n  display: block;\n}\n.fast_list .login_qq {\n  margin: 0 42px;\n}\n.fast_list .login_wb a {\n  color: #f55c5b;\n}\n.fast_list .login_qq a {\n  color: #51b7ff;\n}\n.fast_list .login_wx a {\n  color: #66d65e;\n}\n.fast_tit {\n  position: relative;\n  overflow: hidden;\n}\n.fast_tit .lines {\n  position: absolute;\n  top: 50%;\n  left: 0;\n  width: 100%;\n  height: 1px;\n  line-height: 1;\n  background: #eaeaea;\n}\n.fast_tit .title {\n  background: #fff;\n  font-size: 16px;\n  padding: 3px 14px;\n  position: relative;\n  display: inline-block;\n  z-index: 999;\n}\n/*userinfo*/\n.my_l {\n  width: 198px;\n  float: left;\n  font-size: 13px;\n  padding-top: 20px;\n}\n.my_l li a {\n  display: block;\n  height: 42px;\n  line-height: 42px;\n  padding-left: 62px;\n  border-left: 4px solid #fff;\n  margin-bottom: 5px;\n  color: #666;\n}\n.my_l li .on {\n  background-color: #fafafa;\n  border-left: 2px solid #f80;\n  color: #000;\n  border-radius: 0 2px 2px 0;\n}\n.my_l .link_1 {\n  background-position: 32px -188px;\n}\n.my_l .link_2 {\n  background-position: 32px -230px;\n}\n.my_l .link_3 {\n  background-position: 32px -272px;\n}\n.my_l .link_4 {\n  background-position: 32px -314px;\n}\n.my_l .link_5 {\n  background-position: 32px -356px;\n}\n.my_l .link_6 {\n  background-position: 32px -397px;\n}\n.my_l .link_7 {\n  background-position: 32px -440px;\n}\n.my_l .link_8 {\n  background-position: 32px -481px;\n}\n.my_r {\n  width: 739px;\n  padding: 0 30px 30px;\n  float: right;\n  border-left: 1px solid #efefef;\n  min-height: 470px;\n}\n.my_info {\n  padding: 30px 0 5px;\n}\n.user_big_head {\n  /*width:110px; height:110px; padding:4px; border:1px solid #eaeaea;*/\n  margin-right: 30px;\n  float: left;\n  width: 80px;\n  height: 80px;\n  border-radius: 50%;\n}\n.my_r .my_name {\n  font-size: 18px;\n  line-height: 1;\n  padding: 5px 0 12px 0;\n}\n.my_r .s_input {\n  width: 318px;\n  padding: 0 10px;\n}\n.my_list li {\n  line-height: 28px;\n}\n.my_list li i,\n.my_list li em.red {\n  margin-right: 6px;\n}\n.my_list .binded {\n  color: #999;\n  margin-left: 6px;\n}\n.my_list .btn_link {\n  margin-left: 12px;\n}\n.mytab_list li {\n  line-height: 30px;\n  padding: 10px 0;\n  font-size: 14px;\n}\n.mytab_list li .tit {\n  width: 70px;\n  color: #aaa;\n  text-align: right;\n  display: inline-block;\n  margin-right: 18px;\n}\n.mytab_list .user_img {\n  width: 48px;\n  height: 48px;\n  vertical-align: middle;\n  border-radius: 50%;\n}\n.my_bookshelf .title {\n  padding: 20px 0 15px;\n  line-height: 30px;\n}\n.my_bookshelf h4 {\n  font-size: 14px;\n  color: #666;\n}\n.my_bookshelf h2 {\n  font-size: 18px;\n  font-weight: normal;\n}\n.updateTable {\n  width: 739px;\n  color: #999;\n}\n.updateTable table {\n  width: 100%;\n  margin-bottom: 14px;\n}\n.updateTable th,\n.updateTable td {\n  height: 40px;\n  line-height: 40px;\n  vertical-align: middle;\n  padding-left: 6px;\n  font-weight: normal;\n  text-align: left;\n}\n.updateTable th {\n  background: #f9f9f9;\n  color: #333;\n  border-top: 1px solid #eee;\n}\n.updateTable td {\n  height: 40px;\n  line-height: 40px;\n}\n.updateTable .style {\n  width: 80px;\n  padding-left: 10px;\n}\n.updateTable .name {\n  width: 178px;\n  padding-right: 10px;\n}\n.updateTable .name a,\n.updateTable .chapter a {\n  max-width: 168px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n.updateTable .chapter {\n  padding-right: 5px;\n}\n.updateTable .chapter a {\n  max-width: 220px;\n  float: left;\n}\n.updateTable .author {\n  width: 72px;\n  text-align: left;\n}\n.updateTable .goread {\n  width: 80px;\n  text-align: center;\n}\n.updateTable .time {\n  width: 86px;\n}\n.updateTable .word {\n  width: 64px;\n  padding-right: 10px;\n  text-align: right;\n}\n.updateTable .rank {\n  width: 30px;\n  padding-right: 10px;\n  text-align: center;\n}\n.updateTable .name a,\n.updateTable .chapter a,\n.updateTable .author a {\n  height: 40px;\n  line-height: 40px;\n  display: inline-block;\n  overflow: hidden;\n}\n.updateTable tr:nth-child(2n) td {\n  background: #fafafa;\n}\n.dataTable {\n  width: 739px;\n}\n.dataTable table {\n  width: 100%;\n  margin-bottom: 14px;\n  border-collapse: collapse;\n}\n.dataTable th,\n.dataTable td {\n  height: 40px;\n  line-height: 40px;\n  vertical-align: middle;\n  padding: 0 10px;\n  font-weight: normal;\n  text-align: center;\n  border: 1px solid #eaeaea;\n}\n.dataTable th {\n  background: #f8f8f8;\n}\n.nodate {\n  border-top: 1px solid #eaeaea;\n  padding: 60px 0;\n}\n.viewhistoryBox {\n  /*padding: 0 30px 30px; */\n  padding: 0 20px 10px;\n}\n.viewhistoryBox .updateTable {\n  width: 100%;\n}\n/*.btn_gray, .btn_red, .btn_ora { font-size:14px; padding:8px 28px }*/\n.book_tit {\n  height: 48px;\n  line-height: 48px;\n  margin: 0 14px;\n  border-bottom: 1px solid #eaeaea;\n  overflow: hidden;\n}\n.book_tit .fl {\n  font-size: 14px;\n  color: #999;\n}\n.book_tit .fl h3 {\n  font-size: 18px;\n  color: #333;\n  font-weight: normal;\n  margin-right: 5px;\n  display: inline;\n}\n.book_tit .fr {\n  font-size: 14px;\n}\n\n.commentBar,\n.feedback_list {\n  border-top: 1px solid #eee;\n  margin-bottom: 15px;\n}\n/*.comment_list { padding: 16px 0; border-bottom: 1px solid #eee }\n.comment_list .user_head { width:54px; height:54px; border-radius:50%; float: left; margin-right: 14px }\n.comment_list .li_1 { overflow: hidden }\n.comment_list .user_name { color: #ed4259 }\n.comment_list .li_2 { padding:3px 0; color:#999 }\n.comment_list .li_3, .comment_list .li_4 { margin-left:68px }\n.comment_list .reply { padding-left: 12px }\n.comment_list .num { color: #ed4259; margin: 0 3px }\n.comment_list .li_4 { line-height:34px; padding-top:8px; margin-top:15px; border-top:1px solid #eaeaea }\n.comment_list .li_4 .more { background:#f7f7f7; border-radius:2px; color:#ed4259; text-align:center }*/\n.no_contet {\n  padding: 190px 0 40px;\n  text-align: center;\n  color: #999;\n  border-top: 1px solid #eee;\n}\n\n.comment_list {\n  padding: 20px 0;\n  border-bottom: 1px solid #eee;\n}\n.comment_list:last-child {\n  border: none;\n}\n.comment_list .user_heads {\n  /*width: 54px; height: 54px; float: left;*/\n  position: relative;\n  margin-right: 20px;\n}\n.comment_list .user_head {\n  width: 50px;\n  height: 50px;\n  border-radius: 50%;\n  background: #f6f6f6;\n}\n.comment_list .user_heads span {\n  display: block;\n  margin: 0;\n  position: absolute;\n  left: 12px;\n  bottom: 0;\n}\n.comment_list ul {\n  /*width: 640px;*/\n  width: 660px;\n}\n.comment_list .li_0 {\n  font-family: \"宋体\";\n}\n.comment_list .li_0 strong {\n  font-size: 14px;\n  color: #f00;\n}\n.comment_list .li_1 {\n  overflow: hidden;\n}\n.comment_list .user_name {\n  color: #ed4259;\n}\n.comment_list .li_2 {\n  padding: 6px 0;\n}\n.comment_list .li_3 {\n  color: #999;\n}\n.comment_list .reply {\n  padding-left: 12px;\n}\n.comment_list .num {\n  color: #ed4259;\n  margin: 0 3px;\n}\n.comment_list .li_4 {\n  line-height: 34px;\n  padding-top: 8px;\n  margin-top: 15px;\n  border-top: 1px solid #eaeaea;\n}\n.pl_bar li {\n  display: block;\n}\n.pl_bar .name {\n  color: #666;\n  padding-top: 2px;\n  font-size: 14px;\n}\n.pl_bar .dec {\n  font-size: 14px;\n  line-height: 1.8;\n  padding: 12px 0;\n}\n.pl_bar .other {\n  line-height: 24px;\n  color: #999;\n  font-size: 13px;\n}\n.pl_bar .other a {\n  display: inline-block;\n  color: #999;\n}\n.pl_bar .reply {\n  padding-left: 22px;\n}\n/*.no_comment { padding: 70px 14px 115px; color: #CCCCCC; text-align: center; font-size: 14px; }*/\n.reply_bar {\n  background: #f9f9f9;\n  border: 1px solid #eee;\n  border-radius: 6px;\n  padding: 10px;\n  line-height: 1.8;\n}\n</style>"]},"metadata":{},"sourceType":"module"}