{"ast":null,"code":"import { reactive, toRefs, onMounted, ref } from \"vue\";\nimport { useRouter, useRoute } from \"vue-router\";\nimport { ElMessage } from \"element-plus\";\nimport { getImgVerifyCode } from \"@/api/resource\";\nimport { register } from \"@/api/author\";\nimport { setToken, setNickName, setUid } from \"@/utils/auth\";\nimport Header from \"@/components/common/Header\";\nimport Footer from \"@/components/common/Footer\";\nexport default {\n  name: \"authorRegister\",\n  components: {\n    Header,\n    Footer\n  },\n  setup() {\n    const route = useRoute();\n    const router = useRouter();\n    const state = reactive({\n      penName: \"\",\n      telPhone: \"\",\n      chatAccount: \"\",\n      email: \"\",\n      workDirection: \"0\"\n    });\n    const registerAuthor = async () => {\n      if (!state.penName) {\n        ElMessage.error(\"笔名不能为空！\");\n        return;\n      }\n      if (!state.telPhone) {\n        ElMessage.error(\"手机号不能为空！\");\n        return;\n      }\n      if (!/^1[3-9]\\d{9}$/.test(state.telPhone)) {\n        ElMessage.error(\"手机号格式不正确！\");\n        return;\n      }\n      if (!state.chatAccount) {\n        ElMessage.error(\"QQ或微信账号不能为空！\");\n        return;\n      }\n      if (!state.email) {\n        ElMessage.error(\"电子邮箱不能为空！\");\n        return;\n      }\n      if (!/^[A-Za-z0-9\\-_]+[A-Za-z0-9\\.\\-_]*[A-Za-z0-9\\-_]+@[A-Za-z0-9]+[A-Za-z0-9\\.\\-_]*(\\.[A-Za-z0-9\\.\\-_]+)*[A-Za-z0-9]+\\.[A-Za-z0-9]+[A-Za-z0-9\\.\\-_]*[A-Za-z0-9]+$/.test(state.email)) {\n        ElMessage.error(\"电子邮箱格式不正确！\");\n        return;\n      }\n      const {\n        data\n      } = await register(state);\n      router.push({\n        name: \"authorBookList\"\n      });\n    };\n    return {\n      ...toRefs(state),\n      registerAuthor\n    };\n  }\n};","map":{"version":3,"mappings":"AAsKA,SAASA,QAAQ,EAAEC,MAAM,EAAEC,SAAS,EAAEC,GAAE,QAAS,KAAK;AACtD,SAASC,SAAS,EAAEC,QAAO,QAAS,YAAY;AAChD,SAASC,SAAQ,QAAS,cAAc;AACxC,SAASC,gBAAe,QAAS,gBAAgB;AACjD,SAASC,QAAO,QAAS,cAAc;AACvC,SAASC,QAAQ,EAAEC,WAAW,EAAEC,MAAK,QAAS,cAAc;AAC5D,OAAOC,MAAK,MAAO,4BAA4B;AAC/C,OAAOC,MAAK,MAAO,4BAA4B;AAC/C,eAAe;EACbC,IAAI,EAAE,gBAAgB;EACtBC,UAAU,EAAE;IACVH,MAAM;IACNC;EACF,CAAC;EACDG,KAAKA,GAAG;IACN,MAAMC,KAAI,GAAIZ,QAAQ,CAAC,CAAC;IACxB,MAAMa,MAAK,GAAId,SAAS,CAAC,CAAC;IAE1B,MAAMe,KAAI,GAAInB,QAAQ,CAAC;MACrBoB,OAAO,EAAE,EAAE;MACXC,QAAQ,EAAE,EAAE;MACZC,WAAW,EAAE,EAAE;MACfC,KAAK,EAAE,EAAE;MACTC,aAAa,EAAE;IACjB,CAAC,CAAC;IAEF,MAAMC,cAAa,GAAI,YAAY;MACjC,IAAI,CAACN,KAAK,CAACC,OAAO,EAAE;QAClBd,SAAS,CAACoB,KAAK,CAAC,SAAS,CAAC;QAC1B;MACF;MACA,IAAI,CAACP,KAAK,CAACE,QAAQ,EAAE;QACnBf,SAAS,CAACoB,KAAK,CAAC,UAAU,CAAC;QAC3B;MACF;MACA,IAAI,CAAC,eAAe,CAACC,IAAI,CAACR,KAAK,CAACE,QAAQ,CAAC,EAAE;QACzCf,SAAS,CAACoB,KAAK,CAAC,WAAW,CAAC;QAC5B;MACF;MACA,IAAI,CAACP,KAAK,CAACG,WAAW,EAAE;QACtBhB,SAAS,CAACoB,KAAK,CAAC,cAAc,CAAC;QAC/B;MACF;MACA,IAAI,CAACP,KAAK,CAACI,KAAK,EAAE;QAChBjB,SAAS,CAACoB,KAAK,CAAC,WAAW,CAAC;QAC5B;MACF;MACA,IACE,CAAC,8JAA8J,CAACC,IAAI,CAClKR,KAAK,CAACI,KACR,GACA;QACAjB,SAAS,CAACoB,KAAK,CAAC,YAAY,CAAC;QAC7B;MACF;MAEA,MAAM;QAAEE;MAAK,IAAI,MAAMpB,QAAQ,CAACW,KAAK,CAAC;MAEtCD,MAAM,CAACW,IAAI,CAAC;QAAEf,IAAI,EAAE;MAAiB,CAAC,CAAC;IACzC,CAAC;IAED,OAAO;MACL,GAAGb,MAAM,CAACkB,KAAK,CAAC;MAChBM;IACF,CAAC;EACH;AACF,CAAC","names":["reactive","toRefs","onMounted","ref","useRouter","useRoute","ElMessage","getImgVerifyCode","register","setToken","setNickName","setUid","Header","Footer","name","components","setup","route","router","state","penName","telPhone","chatAccount","email","workDirection","registerAuthor","error","test","data","push"],"sourceRoot":"","sources":["D:\\desktop\\小说精品屋\\novel-front-web-master\\novel-front-web-master\\src\\views\\author\\Register.vue"],"sourcesContent":["<template>\n  <div\n    style=\"\n      width: 800px;\n      margin-left: auto;\n      margin-right: auto;\n      margin-top: 150px;\n    \"\n  >\n    <div id=\"main\">\n      <table\n        width=\"100%\"\n        border=\"0\"\n        cellpadding=\"8\"\n        cellspacing=\"0\"\n        class=\"tableBasic\"\n        style=\"line-height: 40px\"\n      >\n        <tbody>\n          <tr>\n            <td colspan=\"3\" style=\"text-align: left\">\n              <div style=\"padding-left: 15px; height: 40px; line-height: 40px\">\n                我是网络小说写手，我要注册为小说精品屋签约作者：\n              </div>\n            </td>\n          </tr>\n\n          <tr>\n            <td align=\"right\">作者笔名：</td>\n            <td>\n              <input\n                v-model=\"penName\"\n                name=\"penName\"\n                \n                type=\"text\"\n                maxlength=\"8\"\n                id=\"TxtNiceName\"\n                class=\"\n                  easyui-validatebox\n                  inpMain\n                  validatebox-text validatebox-invalid\n                \"\n                data-options=\"required:true\"\n                validtype=\"checkPenName\"\n              />\n            </td>\n            <td><span class=\"notes\"> *</span> 长度为2到8位的中英文</td>\n          </tr>\n          <tr>\n            <td align=\"right\">手机号码：</td>\n            <td>\n              <input\n              v-model=\"telPhone\"\n                name=\"telPhone\"\n                \n                type=\"text\"\n                id=\"TxtMobile\"\n                class=\"\n                  easyui-validatebox\n                  inpMain\n                  validatebox-text validatebox-invalid\n                \"\n                data-options=\"required:true\"\n                validtype=\"chinaMobile\"\n              />\n            </td>\n            <td>\n              <span class=\"notes\"> *</span>\n              小说精品屋的编辑会通过这个号码与您联系\n            </td>\n          </tr>\n          <tr>\n            <td align=\"right\">QQ或微信：</td>\n            <td>\n              <input\n              v-model=\"chatAccount\"\n                name=\"chatAccount\"\n                \n                type=\"text\"\n                id=\"TxtQQ\"\n                class=\"\n                  easyui-validatebox\n                  inpMain\n                  validatebox-text validatebox-invalid\n                \"\n                data-options=\"required:true\"\n              />\n            </td>\n            <td>\n              <span class=\"notes\"> *</span>\n              小说精品屋的编辑会通过这个号码与您联系\n            </td>\n          </tr>\n          <tr>\n            <td align=\"right\">电子邮箱：</td>\n            <td>\n              <input\n              v-model=\"email\"\n                name=\"email\"\n                \n                type=\"text\"\n                id=\"TxtEmail\"\n                class=\"\n                  easyui-validatebox\n                  inpMain\n                  w300\n                  validatebox-text validatebox-invalid\n                \"\n                data-options=\"required:true\"\n                validtype=\"email\"\n                title=\"\"\n              />\n            </td>\n            <td><span class=\"notes\"> *</span> 长度为2到15位的中英文，数字</td>\n          </tr>\n          <tr>\n            <td align=\"right\">男女主角：</td>\n            <td>\n              <div>\n                <ul class=\"ipage\">\n                  <input v-model=\"workDirection\" type=\"radio\" name=\"workDirection\" value=\"0\" />男频\n                  <input v-model=\"workDirection\" type=\"radio\" name=\"workDirection\" value=\"1\" />女频\n                </ul>\n              </div>\n            </td>\n            <td><span class=\"notes\"> *</span> 请选择作品方向</td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n    <table\n      width=\"100%\"\n      border=\"0\"\n      cellpadding=\"8\"\n      cellspacing=\"0\"\n      class=\"tableBasic\"\n    >\n      <tbody>\n        <tr>\n          <td>\n            <div\n              style=\"padding-left: 110px; margin-top: 10px; margin-bottom: 5px\"\n            >\n              <input\n                @click=\"registerAuthor\"\n                type=\"button\"\n                name=\"btnSubmit\"\n                value=\"立即开始您的作者生涯\"\n                id=\"btnSubmit\"\n                class=\"btn\"\n              />\n            </div>\n          </td>\n        </tr>\n        <tr>\n          <td>\n            <span id=\"LabErr\"></span>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n    <input type=\"hidden\" name=\"HidUId\" id=\"HidUId\" value=\"1095\" />\n  </div>\n</template>\n\n<script>\nimport { reactive, toRefs, onMounted, ref } from \"vue\";\nimport { useRouter, useRoute } from \"vue-router\";\nimport { ElMessage } from \"element-plus\";\nimport { getImgVerifyCode } from \"@/api/resource\";\nimport { register } from \"@/api/author\";\nimport { setToken, setNickName, setUid } from \"@/utils/auth\";\nimport Header from \"@/components/common/Header\";\nimport Footer from \"@/components/common/Footer\";\nexport default {\n  name: \"authorRegister\",\n  components: {\n    Header,\n    Footer,\n  },\n  setup() {\n    const route = useRoute();\n    const router = useRouter();\n\n    const state = reactive({\n      penName: \"\",\n      telPhone: \"\",\n      chatAccount: \"\",\n      email: \"\",\n      workDirection: \"0\",\n    });\n\n    const registerAuthor = async () => {\n      if (!state.penName) {\n        ElMessage.error(\"笔名不能为空！\");\n        return;\n      }\n      if (!state.telPhone) {\n        ElMessage.error(\"手机号不能为空！\");\n        return;\n      }\n      if (!/^1[3-9]\\d{9}$/.test(state.telPhone)) {\n        ElMessage.error(\"手机号格式不正确！\");\n        return;\n      }\n      if (!state.chatAccount) {\n        ElMessage.error(\"QQ或微信账号不能为空！\");\n        return;\n      }\n      if (!state.email) {\n        ElMessage.error(\"电子邮箱不能为空！\");\n        return;\n      }\n      if (\n        !/^[A-Za-z0-9\\-_]+[A-Za-z0-9\\.\\-_]*[A-Za-z0-9\\-_]+@[A-Za-z0-9]+[A-Za-z0-9\\.\\-_]*(\\.[A-Za-z0-9\\.\\-_]+)*[A-Za-z0-9]+\\.[A-Za-z0-9]+[A-Za-z0-9\\.\\-_]*[A-Za-z0-9]+$/.test(\n          state.email\n        )\n      ) {\n        ElMessage.error(\"电子邮箱格式不正确！\");\n        return;\n      }\n      \n      const { data } = await register(state);\n\n      router.push({ name: \"authorBookList\" });\n    };\n\n    return {\n      ...toRefs(state),\n      registerAuthor,\n    };\n  },\n};\n</script>\n\n\n<style scoped>\n.btn {\n    display: inline-block;\n    background-color: #f80;\n    -moz-border-radius: 2px;\n    -webkit-border-radius: 2px;\n    border: 1px solid #f70;\n    color: #FFF;\n    line-height:1;\n    padding: 7px 20px;\n    cursor: pointer;\n}\n.btnGray {\n    display: inline-block;\n    background-color: #EEE;\n    -moz-border-radius: 2px;\n    -webkit-border-radius: 2px;\n    border: 0;\n    color: #666;\n    padding: 6px 15px;\n    font-weight: bold;\n    text-transform: capitalize;\n    cursor: pointer;\n    -webkit-appearance: none;\n}\n.btnPayment {\n    display: inline-block;\n    background-color: #ff4246;\n    color: #FFF;\n    padding: 7px 28px;\n    text-transform: capitalize;\n    cursor: pointer;\n    font-weight: bold;\n    font-size:14px;\n    text-align:center;\n    -webkit-appearance: none;\n}\n.inpMain {\n    border: 1px solid #DBDBDB;\n    background-color: #FFF;\n    padding: 4px 5px;\n    color: #727272;\n    font-size: 12x;\n    line-height: 20px;\n    -webkit-appearance: none;\n}\n.inpFlie {\n    border: 1px solid #DBDBDB;\n    background-color: #FFF;\n    padding: 5px 5px;\n    color: #999;\n    -webkit-appearance: none;\n}\n.textArea {\n    border: 1px solid #DBDBDB;\n    background-color: #FFF;\n    padding: 4px 5px;\n    color: #727272;\n    font-size: 12x;\n    line-height: 20px;\n    -webkit-appearance: none;\n}\n.textAreaAuto {\n    border: 1px solid #DBDBDB;\n    background-color: #FFF;\n    padding: 0;\n    color: #999;\n    font-size: 12x;\n    line-height: 20px;\n    resize: none;\n    min-height: 40px;\n    -webkit-appearance: none;\n}\nselect {\n    border: 1px solid #DBDBDB;\n    padding: 2px 5px 2px 4px;\n}\n/*- tab -*/\n.tab {\n    border-bottom: 1px solid #60BBFF;\n    font-weight: bold;\n    font-size: 14px;\n    height: 35px;\n    overflow: hidden;\n}\n.tab li {\n    float: left;\n    line-height: 35px;\n    height: 35px;\n}\n.tab a {\n    display: block;\n    background-color: #F9F9F9;\n    padding: 0 44px;\n    text-decoration: none;\n    color: #999;\n}\n.tab a.selected {\n    background-color: #60BBFF;\n    color: #FFF;\n}\n/*- tableBasic -*/\n.tableBasic {\n    background-color: #F9F9F9;\n    /*color: #666666;*/\n    border-left: 1px dotted #CCCCCC;\n    border-top: 1px dotted #CCCCCC;\n}\n.tableBasic select {\n    color: #727272;\n}\n.tableBasic td, .tableBasic th {\n    border-right: 1px dotted #CCCCCC;\n    border-bottom: 1px dotted #CCCCCC;\n}\n.tableBasic th {\n    text-align:right;\n    width:120px;\n    font-weight:normal;\n}\n.notes{color:Red;line-height:20px;}\n.showNote{background: #fffae2;}\n.tableBasic .child {\n    background-color: #FFFFFF;\n}\n/*- tableNobor -*/\n.tableNobor td {\n    border: 0;\n}\n/*- tableOnebor -*/\n.tableOnebor td {\n    border-right: 0;\n}\n</style>"]},"metadata":{},"sourceType":"module"}