{"ast":null,"code":"import logo from \"@/assets/images/logo.png\";\nimport { reactive, toRefs, onMounted } from \"vue\";\nimport { useRouter, useRoute } from \"vue-router\";\nimport { getToken, getNickName, removeToken, removeNickName, removeUid } from \"@/utils/auth\";\nexport default {\n  name: \"Top\",\n  setup(props, context) {\n    const state = reactive({\n      keyword: \"\",\n      nickName: getNickName(),\n      token: getToken()\n    });\n    state.nickName = getNickName();\n    state.token = getToken();\n    const route = useRoute();\n    const router = useRouter();\n    state.keyword = route.query.key;\n    const searchByK = () => {\n      router.push({\n        path: \"/bookclass\",\n        query: {\n          key: state.keyword\n        }\n      });\n      context.emit(\"eventSerch\", state.keyword);\n    };\n    const logout = () => {\n      removeToken();\n      removeNickName();\n      removeUid();\n      state.nickName = \"\";\n      state.token = \"\";\n    };\n    return {\n      ...toRefs(state),\n      logo,\n      searchByK,\n      logout\n    };\n  }\n};","map":{"version":3,"mappings":"AA4BA,OAAOA,IAAG,MAAO,0BAA0B;AAC3C,SAASC,QAAQ,EAAEC,MAAM,EAAEC,SAAQ,QAAS,KAAK;AACjD,SAASC,SAAS,EAAEC,QAAO,QAAS,YAAY;AAChD,SAASC,QAAQ,EAAEC,WAAW,EAAEC,WAAW,EAAEC,cAAc,EAAEC,SAAQ,QAAS,cAAc;AAC5F,eAAe;EACbC,IAAI,EAAE,KAAK;EACXC,KAAKA,CAACC,KAAK,EAAEC,OAAO,EAAE;IACpB,MAAMC,KAAI,GAAId,QAAQ,CAAC;MACrBe,OAAO,EAAE,EAAE;MACXC,QAAQ,EAAEV,WAAW,CAAC,CAAC;MACvBW,KAAK,EAAEZ,QAAQ,CAAC;IAClB,CAAC,CAAC;IACFS,KAAK,CAACE,QAAO,GAAIV,WAAW,CAAC,CAAC;IAC9BQ,KAAK,CAACG,KAAI,GAAIZ,QAAQ,CAAC,CAAC;IACxB,MAAMa,KAAI,GAAId,QAAQ,CAAC,CAAC;IACxB,MAAMe,MAAK,GAAIhB,SAAS,CAAC,CAAC;IAC1BW,KAAK,CAACC,OAAM,GAAIG,KAAK,CAACE,KAAK,CAACC,GAAG;IAC/B,MAAMC,SAAQ,GAAIA,MAAM;MACtBH,MAAM,CAACI,IAAI,CAAC;QAAEC,IAAI,EAAE,YAAY;QAAEJ,KAAK,EAAE;UAAEC,GAAG,EAAEP,KAAK,CAACC;QAAQ;MAAE,CAAC,CAAC;MAClEF,OAAO,CAACY,IAAI,CAAC,YAAY,EAAEX,KAAK,CAACC,OAAO,CAAC;IAC3C,CAAC;IACD,MAAMW,MAAK,GAAIA,MAAM;MACnBnB,WAAW,CAAC,CAAC;MACbC,cAAc,CAAC,CAAC;MAChBC,SAAS,CAAC;MACVK,KAAK,CAACE,QAAO,GAAI,EAAE;MACnBF,KAAK,CAACG,KAAI,GAAI,EAAE;IAClB,CAAC;IACD,OAAO;MACL,GAAGhB,MAAM,CAACa,KAAK,CAAC;MAChBf,IAAI;MACJuB,SAAS;MACTI;IACF,CAAC;EACH;AACF,CAAC","names":["logo","reactive","toRefs","onMounted","useRouter","useRoute","getToken","getNickName","removeToken","removeNickName","removeUid","name","setup","props","context","state","keyword","nickName","token","route","router","query","key","searchByK","push","path","emit","logout"],"sourceRoot":"","sources":["D:\\desktop\\novel-front-web-master\\src\\components\\common\\Top.vue"],"sourcesContent":["<template>\n  <div class=\"topMain\">\n    <div class=\"box_center cf\">\n      <router-link :to=\"{ name: 'home' }\" class=\"logo fl\"><img :src=\"logo\" alt=\"小说精品屋\" /></router-link>\n      <div class=\"searchBar fl\">\n        <div class=\"search cf\">\n          <input v-model=\"keyword\" type=\"text\" placeholder=\"书名、作者、关键字\" class=\"s_int\" v-on:keyup.enter=\"searchByK\" />\n          <label class=\"search_btn\" id=\"btnSearch\" @click=\"searchByK()\"><i class=\"icon\"></i></label>\n        </div>\n      </div>\n\n      <div class=\"bookShelf fr\" id=\"headerUserInfo\">\n        <!--\n        <a class=\"sj_link\" href=\"/user/favorites.html\">我的书架</a>-->\n        <span v-if=\"!token\" class=\"user_link\"><!--<i class=\"line mr20\">|</i\n          >-->\n          <router-link :to=\"{ name: 'login' }\" class=\"mr15\">登录</router-link>\n          <router-link :to=\"{ name: 'register' }\" class=\"mr15\">注册</router-link>\n        </span>\n        <span v-if=\"token\" class=\"user_link\"><!--<i class=\"line mr20\">|</i\n          >--><router-link :to=\"{ name: 'userSetup' }\" class=\"mr15\">{{ nickName }}</router-link>\n          <a @click=\"logout\" href=\"javascript:void(0)\">退出</a></span>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport logo from \"@/assets/images/logo.png\";\nimport { reactive, toRefs, onMounted } from \"vue\";\nimport { useRouter, useRoute } from \"vue-router\";\nimport { getToken, getNickName, removeToken, removeNickName, removeUid } from \"@/utils/auth\";\nexport default {\n  name: \"Top\",\n  setup(props, context) {\n    const state = reactive({\n      keyword: \"\",\n      nickName: getNickName(),\n      token: getToken(),\n    });\n    state.nickName = getNickName();\n    state.token = getToken();\n    const route = useRoute();\n    const router = useRouter();\n    state.keyword = route.query.key;\n    const searchByK = () => {\n      router.push({ path: \"/bookclass\", query: { key: state.keyword } });\n      context.emit(\"eventSerch\", state.keyword);\n    };\n    const logout = () => {\n      removeToken();\n      removeNickName();\n      removeUid()\n      state.nickName = \"\";\n      state.token = \"\";\n    };\n    return {\n      ...toRefs(state),\n      logo,\n      searchByK,\n      logout,\n    };\n  },\n};\n</script>"]},"metadata":{},"sourceType":"module"}