{"ast":null,"code":"import \"@/assets/styles/book.css\";\nimport { reactive, toRefs, onMounted } from \"vue\";\nimport { useRouter, useRoute } from \"vue-router\";\nimport { getBookById, listChapters } from \"@/api/book\";\nimport Header from \"@/components/common/Header\";\nimport Footer from \"@/components/common/Footer\";\nexport default {\n  name: \"chapterList\",\n  components: {\n    Header,\n    Footer\n  },\n  setup() {\n    const route = useRoute();\n    const router = useRouter();\n    const state = reactive({\n      book: {},\n      chapterList: [],\n      imgBaseUrl: process.env.VUE_APP_BASE_IMG_URL\n    });\n    onMounted(() => {\n      const bookId = route.params.bookId;\n      loadBook(bookId);\n      loadChapterList(bookId);\n    });\n    const loadBook = async bookId => {\n      const {\n        data\n      } = await getBookById(bookId);\n      state.book = data;\n    };\n    const loadChapterList = async bookId => {\n      const {\n        data\n      } = await listChapters({\n        bookId: bookId\n      });\n      state.chapterList = data;\n    };\n    const bookContent = (bookId, chapterId) => {\n      router.push({\n        path: `/book/${bookId}/${chapterId}`\n      });\n    };\n    const bookDetail = bookId => {\n      router.push({\n        path: `/book/${bookId}`\n      });\n    };\n    return {\n      ...toRefs(state),\n      bookContent,\n      bookDetail\n    };\n  }\n};","map":{"version":3,"mappings":"AAkDA,OAAO,0BAA0B;AACjC,SAASA,QAAQ,EAAEC,MAAM,EAAEC,SAAQ,QAAS,KAAK;AACjD,SAASC,SAAS,EAAEC,QAAO,QAAS,YAAY;AAChD,SAASC,WAAW,EAAEC,YAAW,QAAS,YAAY;AACtD,OAAOC,MAAK,MAAO,4BAA4B;AAC/C,OAAOC,MAAK,MAAO,4BAA4B;AAC/C,eAAe;EACbC,IAAI,EAAE,aAAa;EACnBC,UAAU,EAAE;IACVH,MAAM;IACNC;EACF,CAAC;EACDG,KAAKA,GAAG;IACN,MAAMC,KAAI,GAAIR,QAAQ,CAAC,CAAC;IACxB,MAAMS,MAAK,GAAIV,SAAS,CAAC,CAAC;IAE1B,MAAMW,KAAI,GAAId,QAAQ,CAAC;MACrBe,IAAI,EAAE,CAAC,CAAC;MACRC,WAAW,EAAE,EAAE;MACfC,UAAU,EAAEC,OAAO,CAACC,GAAG,CAACC;IAC1B,CAAC,CAAC;IACFlB,SAAS,CAAC,MAAM;MACd,MAAMmB,MAAK,GAAIT,KAAK,CAACU,MAAM,CAACD,MAAM;MAClCE,QAAQ,CAACF,MAAM,CAAC;MAChBG,eAAe,CAACH,MAAM,CAAC;IACzB,CAAC,CAAC;IAEF,MAAME,QAAO,GAAI,MAAOF,MAAM,IAAK;MACjC,MAAM;QAAEI;MAAK,IAAI,MAAMpB,WAAW,CAACgB,MAAM,CAAC;MAC1CP,KAAK,CAACC,IAAG,GAAIU,IAAI;IACnB,CAAC;IAED,MAAMD,eAAc,GAAI,MAAOH,MAAM,IAAK;MACxC,MAAM;QAAEI;MAAK,IAAI,MAAMnB,YAAY,CAAC;QAAEe,MAAM,EAAEA;MAAO,CAAC,CAAC;MACvDP,KAAK,CAACE,WAAU,GAAIS,IAAI;IAC1B,CAAC;IAED,MAAMC,WAAU,GAAIA,CAACL,MAAM,EAAEM,SAAS,KAAK;MACzCd,MAAM,CAACe,IAAI,CAAC;QAAEC,IAAI,EAAG,SAAQR,MAAO,IAAGM,SAAU;MAAE,CAAC,CAAC;IACvD,CAAC;IAED,MAAMG,UAAS,GAAKT,MAAM,IAAK;MAC7BR,MAAM,CAACe,IAAI,CAAC;QAAEC,IAAI,EAAG,SAAQR,MAAO;MAAE,CAAC,CAAC;IAC1C,CAAC;IAED,OAAO;MACL,GAAGpB,MAAM,CAACa,KAAK,CAAC;MAChBY,WAAW;MACXI;IACF,CAAC;EACH;AACF,CAAC","names":["reactive","toRefs","onMounted","useRouter","useRoute","getBookById","listChapters","Header","Footer","name","components","setup","route","router","state","book","chapterList","imgBaseUrl","process","env","VUE_APP_BASE_IMG_URL","bookId","params","loadBook","loadChapterList","data","bookContent","chapterId","push","path","bookDetail"],"sourceRoot":"","sources":["D:\\desktop\\小说精品屋\\novel-front-web-master\\novel-front-web-master\\src\\views\\ChapterList.vue"],"sourcesContent":["<template>\n  <Header />\n  <div class=\"main box_center cf\">\n    <div class=\"nav_sub\">\n      \n    </div>\n    <div class=\"channelWrap channelChapterlist cf mb50\">\n      <div class=\"bookMain\">\n        <div class=\"bookCover cf\">\n          <div class=\"book_info1\">\n            <div class=\"tit\">\n              <h1>{{book.bookName}}</h1>\n              <!--<i class=\"vip_b\">VIP</i>-->\n            </div>\n            <ul class=\"list\">\n              <li>\n                <span>作者：<a href=\"javascript:void(0)\">{{book.authorName}}</a></span>\n                <span\n                  >类别：{{book.categoryName}}</span\n                >\n                <span>状态：<em class=\"black3\">{{\n                  book.bookStatus == 0 ? \"连载中\" : \"已完结\"\n                }}</em></span>\n                <span>总点击：<em class=\"black3\" id=\"cTotal\">{{book.visitCount}}</em></span>\n                <span>总字数：<em class=\"black3\">{{book.wordCount}}</em></span>\n              </li>\n            </ul>\n          </div>\n        </div>\n        <div class=\"dirWrap cf\">\n          <h3>正文({{chapterList.length}})</h3>\n          <div class=\"dirList\">\n            <ul v-for=\"(item,index) in chapterList\" :key=\"index\">\n              <li>\n                <a @click=\"bookContent(book.id,item.id)\" href=\"javascript:void(0)\">\n                  <span>{{item.chapterName}}</span><i class=\"red\"> [{{item.isVip == 1 ? '收费' : '免费'}}]</i>\n                </a>\n              </li>\n            </ul>\n            \n          </div>\n        </div>\n      </div>\n    </div>\n\n    <Footer />\n  </div>\n</template>\n\n<script>\nimport \"@/assets/styles/book.css\";\nimport { reactive, toRefs, onMounted } from \"vue\";\nimport { useRouter, useRoute } from \"vue-router\";\nimport { getBookById, listChapters } from \"@/api/book\";\nimport Header from \"@/components/common/Header\";\nimport Footer from \"@/components/common/Footer\";\nexport default {\n  name: \"chapterList\",\n  components: {\n    Header,\n    Footer,\n  },\n  setup() {\n    const route = useRoute();\n    const router = useRouter();\n\n    const state = reactive({\n      book: {},\n      chapterList: [],\n      imgBaseUrl: process.env.VUE_APP_BASE_IMG_URL,\n    });\n    onMounted(() => {\n      const bookId = route.params.bookId;\n      loadBook(bookId);\n      loadChapterList(bookId);\n    });\n\n    const loadBook = async (bookId) => {\n      const { data } = await getBookById(bookId);\n      state.book = data;\n    };\n\n    const loadChapterList = async (bookId) => {\n      const { data } = await listChapters({ bookId: bookId });\n      state.chapterList = data;\n    };\n\n    const bookContent = (bookId, chapterId) => {\n      router.push({ path: `/book/${bookId}/${chapterId}` });\n    };\n\n    const bookDetail = (bookId) => {\n      router.push({ path: `/book/${bookId}` });\n    };\n\n    return {\n      ...toRefs(state),\n      bookContent,\n      bookDetail,\n    };\n  },\n};\n</script>\n"]},"metadata":{},"sourceType":"module"}